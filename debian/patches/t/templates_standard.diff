From: Jiang <jiangxin@ossxp.com>
Subject: [PATCH] t/templates_standard

<patch description>

Signed-off-by: Jiang <jiangxin@ossxp.com>

---
 html/Makefile.in                       |  13 +-
 html/cosign_base.css                   |  13 +-
 html/error.html                        |  30 ++--
 html/expired_error.html                | 167 ------------------
 html/inc/css.inc                       |   1 +
 html/inc/en/0000.html                  |   2 +
 html/inc/en/0010_wiki.html             |  15 ++
 html/inc/en/0015_blog.html             |  15 ++
 html/inc/en/0020_scm.html              |  21 +++
 html/inc/en/0030_bugtrac.html          |  19 ++
 html/inc/en/0035_testlink.html         |  15 ++
 html/inc/en/0040_comm.html             |  15 ++
 html/inc/en/1000_account.html          |  16 ++
 html/inc/en/9000.html                  |   2 +
 html/inc/factor_invite.inc             |  74 ++++++++
 html/inc/factor_kx509.inc              |  11 ++
 html/inc/factor_login.inc              |  24 +++
 html/inc/factor_login_reauth.inc       |  21 +++
 html/inc/factor_otp.inc                |  16 ++
 html/inc/footer.inc                    |   3 +
 html/inc/header.inc                    |   3 +
 html/inc/help_hotkey.inc               |   7 +
 html/inc/help_infobox.inc              |  60 +++++++
 html/inc/js_config.inc                 |  11 ++
 html/inc/zh/0000.html                  |   2 +
 html/inc/zh/0010_wiki.html             |  15 ++
 html/inc/zh/0015_blog.html             |  15 ++
 html/inc/zh/0020_scm.html              |  21 +++
 html/inc/zh/0030_bugtrac.html          |  19 ++
 html/inc/zh/0035_testlink.html         |  15 ++
 html/inc/zh/0040_comm.html             |  15 ++
 html/inc/zh/1000_account.html          |  16 ++
 html/inc/zh/9000.html                  |   2 +
 html/locale/.gitignore                 |   1 +
 html/locale/Makefile                   |  33 ++++
 html/locale/template.pot               | 296 +++++++++++++++++++++++++++++++
 html/locale/zh/LC_MESSAGES/template.po | 312 +++++++++++++++++++++++++++++++++
 html/login.html                        | 131 ++------------
 html/login_error.html                  | 168 ------------------
 html/looping.html                      |  54 ------
 html/post_error.html                   |  54 ------
 html/reauth.html                       | 147 +++-------------
 html/services.html                     |   6 +-
 html/services/index.php                |   2 +-
 html/validation_error.html             |  54 ------
 html/verify-logout.html                |  30 ++--
 46 files changed, 1205 insertions(+), 777 deletions(-)

diff --git a/html/Makefile.in b/html/Makefile.in
index e0057ad..96db12a 100755
--- a/html/Makefile.in
+++ b/html/Makefile.in
@@ -1,4 +1,6 @@
 TEMPLATES = error.html expired_error.html login.html login_error.html verify-logout.html reauth.html
+## Also copy include files and locales in below directories.
+TEMPLATES += inc locale
 ## static html also serve as template (jiangxin@ossxp.com)
 TEMPLATES += post_error.html looping.html validation_error.html
 TEMPLATES += services.html
@@ -12,15 +14,20 @@ INSTALL	=	@INSTALL@
 
 all: ${TEMPLATES}
 
+locale:
+	cd $@; ${MAKE} all
+
 install : all
 	-mkdir -p ${DESTDIR}${exec_prefix}
 	-mkdir -p ${DESTDIR}${TMPLDIR}
 	-mkdir -p ${DESTDIR}${HTMLDIR}
+	# ossxp.com: $(INSTALL) won't install dirs, so use 'cp' instead
 	for i in ${TEMPLATES}; do \
-	    ${INSTALL} -m 0644 -c $$i ${DESTDIR}${TMPLDIR}/; \
+	    [ -e $$i ] && cp -a $$i ${DESTDIR}${TMPLDIR}; \
 	done
+	# ossxp.com: $(INSTALL) won't install dirs, so use 'cp' instead
 	for i in ${HTML}; do \
-	    ${INSTALL} -m 0644 -c $$i ${DESTDIR}${HTMLDIR}/; \
+	    cp -a $$i ${DESTDIR}${HTMLDIR}/; \
 	done
 	-mkdir -p ${DESTDIR}${HTMLDIR}/images
 	cp images/*.gif ${DESTDIR}${HTMLDIR}/images/
@@ -31,3 +38,5 @@ install : all
 	cp services/*.html services/*.php ${DESTDIR}${SERVICESDIR}/
 
 clean:
+
+.PHONY: clean all ${TEMPLATES}
diff --git a/html/cosign_base.css b/html/cosign_base.css
index 1541b0e..49edaa7 100755
--- a/html/cosign_base.css
+++ b/html/cosign_base.css
@@ -5,7 +5,7 @@ body {
 	background-color: #fff;
 	color: inherit;
 	background: url(/cosign/images/bg_grad.png) 0 0  repeat-x;
-	font: 10px/1.3em Verdana, Arial, Helvetica, sans-serif;
+	font: 12px/1.3em Verdana, Arial, Helvetica, sans-serif;
 }
 
 p, dt, dd, form, input, table {
@@ -261,6 +261,7 @@ a:hover {
 	border-bottom: 1px solid #ccc;
 	border-left: 1px solid #ccc;
 	padding: 8px;
+	font: 10px/1.3em Verdana, Arial, Helvetica, sans-serif;
 }
 
 #rightUIcol .factor p {
@@ -278,7 +279,7 @@ a:hover {
 }
 
 #rightUIcol .factor td {
-	padding: 1px 2px 2px 0px;
+	padding: 5px 2px 2px 0px;
 }
 
 #rightUIcol .switchUser {
@@ -379,3 +380,11 @@ hr.text {
 	font-style: italic;
 	font-size: 90%;
 }
+
+.servicelist {
+	font-size: 100%;
+}
+
+.tooltip {
+	font-size: 9pt;
+}
diff --git a/html/error.html b/html/error.html
index 3a3a08f..f4a5d3d 100755
--- a/html/error.html
+++ b/html/error.html
@@ -1,12 +1,12 @@
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
+<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <meta http-equiv="Pragma" content="no-cache" />
 <meta http-equiv="Expires" content="Monday, 16-Apr-73 13:10:00 GMT" />
 <title>$t</title>
 <style type="text/css" media="screen">
-/* <![CDATA[ */@import "/cosign/cosign_base.css"/**/;/* ]]> */
+$!include(inc/css.inc)
 
 #rightUIcol .factorHead h2 {
 	background: none;
@@ -16,31 +16,28 @@
 </head>
 <body>
 <div id="page">
-	<div id="head"> <a id="mast" href="#" title="Link to Homepage"><span>
-		<!--A small logo for when CSS is disabled goes here. <img src="#" alt="" width="16" height="16" />//-->
-		</span> <strong>Our Home Page</strong></a> </div>
+  $!include(inc/%lang%/header.inc)
 	<div id="main">
 		<div id="uiRow">
 			<div id="leftUIcol">
-				<h1 class="error">Web Login is Unavailable</h1>
-				<p>Web Login is unavailable due to an internal error. We apologize for any inconvenience
-					this may cause and are working to restore service as soon as possible. Please try
-					again later.</p>
-			<p class="techInfo"><strong>Technical
-			Info:</strong> $e</p>
+				<h1 class="error">$t</h1>
+				<p>
+				$m
+				<p>$!_("Please contact technical support if you have any questions.")</p>
+				<p class="techInfo"><strong>$!_("Technical Info:")</strong> $e</p>
 			</div>
 			<form action="#" method="post" name="factors" id="rightUIcol">
 				<div class="factorHead">
-					<h2>ID &amp; Password</h2>
+					<h2>$!_("ID &amp; Password")</h2>
 				</div>
 				<div class="factorHead">
-					<h2>One Time Passcode</h2>
+					<h2>$!_("One Time Passcode")</h2>
 				</div>
 				<div class="factorHead">
-					<h2>Certificate</h2>
+					<h2>$!_("Certificate")</h2>
 				</div>
 				<div id="loginButton">
-					<input type="submit" name="doLogin" value="Log In" disabled="disabled" />
+					<input type="submit" name="doLogin" value="$!_("Log In")" disabled="disabled" />
 				</div>
 			</form>
 			<div class="clear">&nbsp;</div>
@@ -48,7 +45,6 @@
 		<div id="uiBottom">&nbsp;</div>
 	</div>
 </div>
-<div id="foot">&copy; 2006 <a href="http://www.umich.edu/~regents/" title="Regents of the University of Michigan"> Regents
-		of the University of Michigan</a> </div>
+$!include(inc/%lang%/footer.inc)
 </body>
 </html>
diff --git a/html/expired_error.html b/html/expired_error.html
deleted file mode 100644
index 0185219..0000000
--- a/html/expired_error.html
+++ /dev/null
@@ -1,167 +0,0 @@
-<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
-<meta http-equiv="Pragma" content="no-cache" />
-<meta http-equiv="Expires" content="Monday, 16-Apr-73 13:10:00 GMT" />
-<title>$t</title>
-<style type="text/css" media="screen">
-/* <![CDATA[ */@import "/cosign/cosign_base.css"/**/;/* ]]> */
-</style>
-<script type="text/javascript" src="/cosign/js/prototype.js"></script>
-<script type="text/javascript" src="/cosign/js/scriptaculous.js"></script>
-<script type="text/javascript" src="/cosign/js/effects.js"></script>
-<script type="text/javascript" src="/cosign/js/cosign.js"></script>
-<script type="text/javascript">
-	var link = document.createElement('link');
-	link.setAttribute('rel', 'stylesheet');
-	link.setAttribute('type', 'text/css');
-	link.setAttribute('href', '/cosign/cosign_js.css');
-	document.getElementsByTagName('head')[0].appendChild(link);
-	window.onload = function() {
-		var cosign = new Cosign('$f');
-		cosign.setSatisfied('$d');
-		cosign.addFactor(['friend','UMICH.EDU'],'kerbTitle','kerberos');
-		cosign.addFactor('otp','otpTitle','otp');
-		cosign.addFactor('kx509','kx509Title','kx509');
-		cosign.addInfoBox('kerbInfo','kerbInfoShow','kerbInfoHide');
-		cosign.addInfoBox('otpInfo','otpInfoShow','otpInfoHide');
-		cosign.addInfoBox('kx509Info','kx509InfoShow','kx509InfoHide');
-		cosign.initUI();
-	}
-	</script>
-</head>
-<body>
-<div id="page">
-	<div id="head"> <a id="mast" href="#" title="Link to Homepage"><span>
-		<!--A small logo for when CSS is disabled goes here. <img src="#" alt="" width="16" height="16" />//-->
-		</span> <strong>Our Home Page</strong></a> </div>
-	<hr class="text" />
-	<ul class="text">
-		<li><a href="#instruct" title="Jump to the Web Login instructions [ALT + 1 Windows / CONTROL + 1 Mac]" accesskey="1">Jump
-				to the Web Login instructions</a></li>
-		<li><a href="#error" title="Jump to the error message (if present) [ALT + 2 Windows / CONTROL + 2 Mac]" accesskey="2">Jump
-				to the error message (if present)</a></li>
-		<li><a href="#kerberos" title="Jump to the ID and Password section [ALT + 3 Windows / CONTROL + 3 Mac]" accesskey="3">Jump
-				to the ID and Password section</a></li>
-		<li><a href="#otp" title="Jump to the One Time Passcode section [ALT + 4 Windows / CONTROL + 4 Mac]"  accesskey="4">Jump
-				to the One Time Passcode section</a></li>
-		<li><a href="#kx509" title="Jump to the Certificate section [ALT + 5 Windows / CONTROL + 5 Mac]" accesskey="5">Jump
-				to the Certificate section</a></li>
-	</ul>
-	<hr class="text" />
-	<div id="main">
-		<div id="uiRow">
-			<div id="leftUIcol">
-				<h1 id="instruct">Password Expired</h1>
-				<p>Replace this text with information about reseting a password. <a href="http://domain.edu/passwd?ref=$r">reset</a></p>
-				<p class="jsOnly">Authentication
-				sections marked with a <img
-				src="/cosign/images/circle.gif" alt="yellow circle" /> are
-					required.</p>
-				<p>By using this service you agree to adhere to our policies and guidelines.</p>
-				<p class="noScript">This page displays best when JavaScript is enabled in your web
-					browser.</p>
-				<div id="kerbInfo" class="infoBox">
-					<h4><a href="#mainInfo" class="hideInfo" id="kerbInfoHide">Hide this Information</a> <a href="#l2header" class="toTop">Back
-							to Top</a></h4>
-					<h3>Need an Account?</h3>
-					<p>Replace this text with information about obtaining an account. Lorem ipsum dolor
-						sit amet, consectetuer adipiscing elit. Nullam cursus dolor non lacus. Aenean vitae
-						orci. Mauris vulputate ornare urna.</p>
-					<h3>Forgot Your Password?</h3>
-					<p>Replace this text with information about resetting your password. Lorem ipsum
-						dolor sit amet, consectetuer adipiscing elit. Nullam cursus dolor non lacus. Aenean
-						vitae orci. Mauris vulputate ornare urna.</p>
-				</div>
-				<div id="otpInfo" class="infoBox">
-					<h4><a href="#mainInfo" class="hideInfo" id="otpInfoHide">Hide this Information</a> <a href="#l2header" class="toTop">Back
-							to Top</a></h4>
-					<h3>Get a Token</h3>
-					<p>Replace this with text about using one time passcodes. Lorem ipsum dolor sit amet,
-						consectetuer adipiscing elit. Nullam cursus dolor non lacus. Aenean vitae orci.
-						Mauris vulputate ornare urna.</p>
-				</div>
-				<div id="kx509Info" class="infoBox">
-					<h4><a href="#mainInfo" class="hideInfo" id="kx509InfoHide">Hide this Information</a> <a href="#l2header" class="toTop">Back
-							to Top</a></h4>
-					<h3>Download KX.509</h3>
-					<p>The KX.509 service provides a client/server application that uses Kerberos to
-						acquire a short-term X.509 certificate. This makes it possible for web-browsers
-						to authenticate a user to any CoSign-protected web services silently instead of
-						prompting the user for a name and password. At U-M, this service can be used by
-						those who know their Uniqname and Kerberos password.</p>
-				</div>
-			</div>
-			<form action="/cgi-bin/login" method="post" name="factors" id="rightUIcol">
-				<input type="hidden" name="required"
-				value="$f" />
-				<input type="hidden" name="ref"
-				value="$r" />
-				<input type="hidden" name="service"
-				value="$c" />
-				<div id="error">$e</div>
-				<div class="factorHead"> <a href="#" tabindex="10">Help</a>
-					<h2 id="kerbTitle"><span>&nbsp;</span>ID &amp; Password</h2>
-					<div class="authComplete" style="display: none;">Authentication Complete</div>
-				</div>
-				<div class="factor" id="kerberos">
-					<table>
-						<tr>
-							<td><label for="login">Login</label></td>
-							<td><input
-							id="login"
-							name="login"
-							type="text"
-							value="$l" size="18" tabindex="1" /></td>
-						</tr>
-						<tr>
-							<td><label for="password">Password</label></td>
-							<td><input id="password" name="password" type="password" value="" size="18" tabindex="2" /></td>
-						</tr>
-						<tr class="capsLock" style="display: none;">
-							<td>&nbsp;</td>
-							<td>Caps Lock is on</td>
-						</tr>
-					</table>
-					Need <a href="#kerbInfo" id="kerbInfoShow" tabindex="7">an account or password help?</a> </div>
-				<div class="factorHead"> <a href="#" tabindex="11">Help</a>
-					<h2 id="otpTitle"><span>&nbsp;</span>One Time Passcode</h2>
-					<div class="authComplete" style="display: none;">Authentication Complete</div>
-				</div>
-				<div class="factor" id="otp">
-					<table>
-						<tr>
-							<td><label for="passcode" id="pCodeLabel">Passcode</label></td>
-							<td><input id="passcode" name="passcode" type="password" value="" size="18" tabindex="3" /></td>
-						</tr>
-						<tr class="capsLock" style="display: none;">
-							<td>&nbsp;</td>
-							<td>Caps Lock is on</td>
-						</tr>
-					</table>
-					Manage your <a href="#otpInfo" id="otpInfoShow" tabindex="8">token</a> </div>
-				<div class="factorHead"> <a href="#" tabindex="12">Help</a>
-					<h2 id="kx509Title"><span>&nbsp;</span>Certificate</h2>
-					<div class="authComplete" style="display: none;">Authentication Complete</div>
-				</div>
-				<div class="factor" id="kx509">
-					<p class="note">You must have k.x-509 software installed and configured.</p>
-					<p>
-						<input name="useKX509" id="useKX509" type="checkbox" value="1" tabindex="5" />
-						<label for="useKX509">Authenticate using a certificate</label>
-					</p>
-					Download <a href="#kx509Info" id="kx509InfoShow" tabindex="9">k.x-509 software</a> </div>
-				<div id="loginButton">
-					<input type="submit" name="doLogin" value="Log In" tabindex="6" />
-				</div>
-			</form>
-			<div class="clear">&nbsp;</div>
-		</div>
-		<div id="uiBottom">&nbsp;</div>
-	</div>
-</div>
-
-
-</body>
-</html>
diff --git a/html/inc/css.inc b/html/inc/css.inc
new file mode 100644
index 0000000..dbb0379
--- /dev/null
+++ b/html/inc/css.inc
@@ -0,0 +1 @@
+/* <![CDATA[ */@import "/cosign/cosign_base.css"/**/;/* ]]> */
diff --git a/html/inc/en/0000.html b/html/inc/en/0000.html
new file mode 100644
index 0000000..cd6c895
--- /dev/null
+++ b/html/inc/en/0000.html
@@ -0,0 +1,2 @@
+            <table border="0" cellpadding="4">
+              <tbody>
diff --git a/html/inc/en/0010_wiki.html b/html/inc/en/0010_wiki.html
new file mode 100644
index 0000000..26d5e99
--- /dev/null
+++ b/html/inc/en/0010_wiki.html
@@ -0,0 +1,15 @@
+                <tr>
+                  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
+                  <td aligh='right' vliagn='middle'>
+                    <img src="/cosign/images/services/moinmoin.gif" alt="Wiki">
+                  </td>
+                  <td class="servicelist">
+                    <u>
+                    <a name="wiki" href="http://wiki.foo.bar/wiki/action/login/Main?action=login&login=1">Knowledge Management</a>
+                    </u>
+                    <br>
+                    <div class="tooltip">
+                    Collaborative and powerful community websites. Start to contribute..oO
+                    </div>
+                  </td>
+                </tr>
diff --git a/html/inc/en/0015_blog.html b/html/inc/en/0015_blog.html
new file mode 100644
index 0000000..c958079
--- /dev/null
+++ b/html/inc/en/0015_blog.html
@@ -0,0 +1,15 @@
+                <tr>
+                  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
+                  <td aligh='right' vliagn='middle'>
+                    <img src="/cosign/images/services/blog.gif" alt="Blog">
+                  </td>
+                  <td class="servicelist">
+                    <u>
+                    <a name="blog" href="http://blog.foo.bar/">Web log</a>
+                    </u>
+                    <br>
+                    <div class="tooltip">
+                    Speak loud, and share your feelings, opinions, ideas, with others...
+                    </div>
+                  </td>
+                </tr>
diff --git a/html/inc/en/0020_scm.html b/html/inc/en/0020_scm.html
new file mode 100644
index 0000000..ca98031
--- /dev/null
+++ b/html/inc/en/0020_scm.html
@@ -0,0 +1,21 @@
+                <tr>
+                  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
+                  <td aligh='right' vliagn='middle'>
+                    <img src="/cosign/images/services/subversion.gif" alt="Subversion">
+                  </td>
+                  <td class="servicelist">
+                    <u>
+                    Version Control: <a name="websvn" href="http://svn.foo.bar/websvn/">Subversion</a>, 
+                      <a name="git" href="http://git.foo.bar/">Git</a>,
+                      <a name="hg" href="http://hg.foo.bar/">Mercurial</a>
+                    </u>
+                    <br>
+                    <div class="tooltip">
+                    SVN - Best for commercial software development and a centralized develop team.
+                    <br>
+                    Git - For team members all around the world. The power you may have never seen.
+                    <br>
+                    Hg - Lightweight DVCS. Single user and team can all benefit from it.
+                    </div>
+                  </td>
+                </tr>
diff --git a/html/inc/en/0030_bugtrac.html b/html/inc/en/0030_bugtrac.html
new file mode 100644
index 0000000..851f334
--- /dev/null
+++ b/html/inc/en/0030_bugtrac.html
@@ -0,0 +1,19 @@
+                <tr>
+                  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
+                  <td aligh='right' vliagn='middle'>
+                    <img src="/cosign/images/services/pm.gif" alt="Project Management">
+
+                  </td>
+                  <td class="servicelist">
+                    <u>
+                    Project Management: <a name="trac" href="http://trac.foo.bar/">Trac</a>,
+                    <a name="redmine" href="http://redmine.foo.bar/">Redmine</a>
+                    </u>
+                    <br>
+                    <div class="tooltip">
+                    Trac - Trac, a bug tracking system with deep SCM integration.
+                    <br>
+                    Redmine - A trac clone using ROR. Support multiple project.
+                    </div>
+                  </td>
+                </tr>
diff --git a/html/inc/en/0035_testlink.html b/html/inc/en/0035_testlink.html
new file mode 100644
index 0000000..766339d
--- /dev/null
+++ b/html/inc/en/0035_testlink.html
@@ -0,0 +1,15 @@
+                <tr>
+                  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
+                  <td aligh='right' vliagn='middle'>
+                    <img src="/cosign/images/services/tl.gif" alt="Testlink">
+                  </td>
+                  <td class="servicelist">
+                    <u>
+                    Test Lifecyle Management: <a name="testlink" href="http://testlink.foo.bar/">TestLink</a>
+                    </u>
+                    <br>
+                    <div class="tooltip">
+                    From test plan, test cases to test report, a whole test lifecycle management system.
+                    </div>
+                  </td>
+                </tr>
diff --git a/html/inc/en/0040_comm.html b/html/inc/en/0040_comm.html
new file mode 100644
index 0000000..7951cb3
--- /dev/null
+++ b/html/inc/en/0040_comm.html
@@ -0,0 +1,15 @@
+                <tr>
+                  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
+                  <td aligh='right' vliagn='middle'>
+                    <img src="/cosign/images/services/mailman.gif" alt="Mailman">
+                  </td>
+                  <td class="servicelist">
+                    <u>
+                    Communications: <a name="mailman" href="http://list.foo.bar/mailman/listinfo/">Mailing list</a>, IM
+                    </u>
+                    <br>
+                    <div class="tooltip">
+                    Mailing list: Web archive, can push to desktop...
+                    </div>
+                  </td>
+                </tr>
diff --git a/html/inc/en/1000_account.html b/html/inc/en/1000_account.html
new file mode 100644
index 0000000..b9addf9
--- /dev/null
+++ b/html/inc/en/1000_account.html
@@ -0,0 +1,16 @@
+                <tr>
+                  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
+                  <td>
+                    <img src="/cosign/images/services/profile.gif" alt="Profiles">
+                  </td>
+                  <td class="servicelist">
+                    <u>
+                    Control Center: <a name="gosa" href="https://weblogin.foo.bar/members/?login">Account management</a>,
+                    <a name="sso" href="https://weblogin.foo.bar/cgi-bin/login">Single Sign-on</a>
+                    </u>
+                    <br>
+                    <div class="tooltip">
+                    Manage account of all systems in one place. Single Sign-on ready for all.
+                    </div>
+                  </td>
+                </tr>
diff --git a/html/inc/en/9000.html b/html/inc/en/9000.html
new file mode 100644
index 0000000..a0203b7
--- /dev/null
+++ b/html/inc/en/9000.html
@@ -0,0 +1,2 @@
+              </tbody>
+            </table>
diff --git a/html/inc/factor_invite.inc b/html/inc/factor_invite.inc
new file mode 100644
index 0000000..ec2aa86
--- /dev/null
+++ b/html/inc/factor_invite.inc
@@ -0,0 +1,74 @@
+        <script type="text/javascript">
+          function factor_invite_observe() {
+            var input_p = $('password');
+            var input_i = $('invite');
+            var input_l = $('login');
+            var form_login = input_i.up('form');
+
+            Event.observe( form_login, 'submit', function(e) {
+                  if (input_i.value.length > 0 && !input_l.value.include("@"))
+                  {
+                    alert("$!_("Please input your email address into username field.")");
+                    input_l.focus();
+                    Event.stop(e);
+                  }
+                  else if (input_i.value.length == 0 && (input_p.value.length == 0 || input_l.value.length == 0))
+                  {
+                    alert("$!_("Please enter your login and password.")");
+                    input_l.focus();
+                    Event.stop(e);
+                  }
+                  return true;
+              });
+
+            Event.observe( $('invite'), 'focus', function() {
+                  try {
+                    var parent = input_p.up('div')
+                    if (!parent.visible())
+                      new Effect.Appear(parent,{duration:0.20});
+                  } catch ( e ) {;}
+                  input_p.disable().clear().up('tr').hide();
+              });
+
+            Event.observe( $('password'), 'focus', function() {
+                  input_i.disable().clear();
+              });
+
+            Event.observe( $('invite'), 'blur', function() {
+                if (this.value.length > 0) {
+                  input_p.disable().clear().up('tr').hide();
+                  if (!input_l.value.include("@")) {
+                    input_l.select();
+                  }
+                } else {
+                  input_p.enable().up('tr').show();
+                }
+              });
+
+            Event.observe( $('password'), 'blur', function() {
+                if (this.value.length > 0)
+                  input_i.disable().clear();
+                else
+                  input_i.enable();
+              });
+          }
+
+          Event.observe(window, 'load', factor_invite_observe);
+        </script>
+				<div class="factorHead" style="display: none;">
+					<h2 id="inviteloginTitle"><span>&nbsp;</span>$!_("Invite Code")</h2>
+					<div class="authComplete" style="display: none;">$!_("Authentication Complete")</div>
+				</div>
+				<div class="factor" id="invitelogin" style="display: none;">
+					<table>
+						<tr>
+							<td><label for="invite">$!_("The&nbsp;code")</label></td>
+							<td><input id="invite" name="invite" type="password" value="" size="18" tabindex="5" /></td>
+						</tr>
+						<tr class="capsLock" style="display: none;">
+							<td>&nbsp;</td>
+							<td>$!_("Caps Lock is on")</td>
+						</tr>
+					</table>
+					<span class="tooltip"><a href="#inviteinfo" id="inviteInfoShow" tabindex="10">$!_("What is invite code?")</a></span></div>
+
diff --git a/html/inc/factor_kx509.inc b/html/inc/factor_kx509.inc
new file mode 100644
index 0000000..56755f7
--- /dev/null
+++ b/html/inc/factor_kx509.inc
@@ -0,0 +1,11 @@
+				<div class="factorHead" style="display: none;">
+					<h2 id="kx509Title"><span>&nbsp;</span>$!_("Certificate")</h2>
+					<div class="authComplete" style="display: none;">$!_("Authentication Complete")</div>
+				</div>
+				<div class="factor" id="kx509" style="display: none;">
+					<p class="note">$!_("You must have k.x-509 software installed and configured.")</p>
+					<p>
+						<input name="useKX509" id="useKX509" type="checkbox" value="1" tabindex="4" />
+						<label for="useKX509">$!_("Authenticate using a certificate")</label>
+					</p>
+					<span class="tooltip">$!_("Download") <a href="#kx509Info" id="kx509InfoShow" tabindex="9">$!_("k.x-509 software")</a></span></div>
diff --git a/html/inc/factor_login.inc b/html/inc/factor_login.inc
new file mode 100644
index 0000000..1c9d11b
--- /dev/null
+++ b/html/inc/factor_login.inc
@@ -0,0 +1,24 @@
+				<div class="factorHead" style="display: none;">
+					<h2 id="kerbTitle"><span>&nbsp;</span>$!_("ID &amp; Password")</h2>
+					<div class="authComplete" style="display: none;">$!_("Authentication Complete")</div>
+				</div>
+				<div class="factor" id="kerberos" style="display: none;">
+					<table>
+						<tr>
+							<td><label for="login">$!_("Username")</label></td>
+							<td><input
+							id="login"
+							name="login"
+							type="text"
+							value="$l" size="18" tabindex="1" /></td>
+						</tr>
+						<tr>
+							<td><label for="password">$!_("Password")</label></td>
+							<td><input id="password" name="password" type="password" value="" size="18" tabindex="2" /></td>
+						</tr>
+						<tr class="capsLock" style="display: none;">
+							<td>&nbsp;</td>
+							<td>$!_("Caps Lock is on")</td>
+						</tr>
+					</table>
+					<span class="tooltip"><a href="#kerbInfo" id="kerbInfoShow" tabindex="7">$!_("Need an account or password help?")</a></span></div>
diff --git a/html/inc/factor_login_reauth.inc b/html/inc/factor_login_reauth.inc
new file mode 100644
index 0000000..8c7e39c
--- /dev/null
+++ b/html/inc/factor_login_reauth.inc
@@ -0,0 +1,21 @@
+				<div class="factorHead" style="display: none;">
+					<h2 id="kerbTitle"><span>&nbsp;</span>$!_("ID &amp; Password")</h2>
+					<div class="authComplete" style="display: none;">$!_("Authentication Complete")</div>
+				</div>
+				<div class="factor" id="kerberos" style="display: none;">
+					<table>
+						<tr>
+							<td><label for="login">$!_("Username")</label></td>
+							<td
+							id="login">$l (<a href="/cgi-bin/logout" class="switchUser" id="switchUserR" tabindex="1">$!_("Switch Users")</a>)</td>
+						</tr>
+						<tr>
+							<td><label for="password">$!_("Password")</label></td>
+							<td><input id="password" name="password" type="password" value="" size="18" tabindex="2" /></td>
+						</tr>
+						<tr class="capsLock" style="display: none;">
+							<td>&nbsp;</td>
+							<td>$!_("Caps Lock is on")</td>
+						</tr>
+					</table>
+					<span class="tooltip"><a href="#kerbInfo" id="kerbInfoShow" tabindex="7">$!_("Need an account or password help?")</a></span></div>
diff --git a/html/inc/factor_otp.inc b/html/inc/factor_otp.inc
new file mode 100644
index 0000000..9d27d65
--- /dev/null
+++ b/html/inc/factor_otp.inc
@@ -0,0 +1,16 @@
+				<div class="factorHead" style="display: none;">
+					<h2 id="otpTitle"><span>&nbsp;</span>$!_("One Time Passcode")</h2>
+					<div class="authComplete" style="display: none;">$!_("Authentication Complete")</div>
+				</div>
+				<div class="factor" id="otp" style="display: none;">
+					<table>
+						<tr>
+							<td><label for="passcode" id="pCodeLabel">$!_("Passcode")</label></td>
+							<td><input id="passcode" name="passcode" type="password" value="" size="18" tabindex="3" /></td>
+						</tr>
+						<tr class="capsLock" style="display: none;">
+							<td>&nbsp;</td>
+							<td>$!_("Caps Lock is on")</td>
+						</tr>
+					</table>
+					<span class="tooltip"><a href="#otpInfo" id="otpInfoShow" tabindex="8">$!_("Manage your token")</a><span></div>
diff --git a/html/inc/footer.inc b/html/inc/footer.inc
new file mode 100644
index 0000000..0780417
--- /dev/null
+++ b/html/inc/footer.inc
@@ -0,0 +1,3 @@
+<div id="foot">$!_("&copy; 2006 - 2012 <a href=\"http://www.umich.edu/~regents/\""
+	" title=\"Regents of the University of Michigan\"> Regents of the University of"
+	" Michigan</a>, <a href=\"http://www.ossxp.com/\">OSSXP Powered</a>")</div>
diff --git a/html/inc/header.inc b/html/inc/header.inc
new file mode 100644
index 0000000..82d6ead
--- /dev/null
+++ b/html/inc/header.inc
@@ -0,0 +1,3 @@
+	<div id="head"> <a id="mast" href="#" title="$!_("Link to Homepage")"><span>
+		<!--A small logo for when CSS is disabled goes here. <img src="#" alt="" width="16" height="16" />//-->
+		</span> <strong>$!_("Our Home Page")</strong></a> </div>
diff --git a/html/inc/help_hotkey.inc b/html/inc/help_hotkey.inc
new file mode 100644
index 0000000..95c1d82
--- /dev/null
+++ b/html/inc/help_hotkey.inc
@@ -0,0 +1,7 @@
+	<ul class="text">
+		<li><a href="#instruct" title="$!_("Jump to the Web Login instructions") [ALT + 1 Windows / CONTROL + 1 Mac]" accesskey="1">$!_("Jump to the Web Login instructions")</a></li>
+		<li><a href="#error" title="$!_("Jump to the error message (if present)") [ALT + 2 Windows / CONTROL + 2 Mac]" accesskey="2">$!_("Jump to the error message (if present)")</a></li>
+		<li><a href="#kerberos" title="$!_("Jump to the ID and Password section") [ALT + 3 Windows / CONTROL + 3 Mac]" accesskey="3">$!_("Jump to the ID and Password section")</a></li>
+		<li><a href="#otp" title="$!_("Jump to the One Time Passcode section") [ALT + 4 Windows / CONTROL + 4 Mac]"  accesskey="4">$!_("Jump to the One Time Passcode section")</a></li>
+		<li><a href="#kx509" title="$!_("Jump to the Certificate section") [ALT + 5 Windows / CONTROL + 5 Mac]" accesskey="5">$!_("Jump to the Certificate section")</a></li>
+	</ul>
diff --git a/html/inc/help_infobox.inc b/html/inc/help_infobox.inc
new file mode 100644
index 0000000..4678137
--- /dev/null
+++ b/html/inc/help_infobox.inc
@@ -0,0 +1,60 @@
+				<div id="mainInfo">
+					<p>$!_("Please enter your authentication information and click the &quot;Log&nbsp;In&quot; button"
+					  " to continue.")</p>
+					<p class="jsOnly">$!_("Authentication"
+					  " sections marked with a <img"
+					  " src=\"/cosign/images/circle.gif\" alt=\"yellow circle\" /> are"
+					  " required.")</p>
+					<p>$!_("By using this service you agree to adhere to our policies and guidelines.")</p>
+					$!include(%lang%/*.html)
+				</div>
+				<p class="noScript">$!_("This page displays best when JavaScript is enabled in your web"
+				  " browser.")</p>
+
+				<div id="kerbInfo" class="infoBox">
+					<h4><a href="#mainInfo" class="hideInfo" id="kerbInfoHide">$!_("Hide this Information")</a> <a href="#l2header" class="toTop">$!_("Back"
+					  " to Top")</a></h4>
+					<h3>$!_("Need an Account?")</h3>
+					<p>$!_("Replace this text with information about obtaining an account. Lorem ipsum dolor"
+					  " sit amet, consectetuer adipiscing elit. Nullam cursus dolor non lacus. Aenean vitae"
+					  " orci. Mauris vulputate ornare urna.")</p>
+					<!--
+					<p>$!_("Click the following link to register a new account yourself.")<br>
+					<a href="https://members.foo.bar/members/signup.php"><b>$!_("Create an account now")</b></a></p>
+					-->
+					<h3>$!_("Forgot Your Password?")</h3>
+					<p>$!_("Replace this text with information about resetting your password. Lorem ipsum"
+					  " dolor sit amet, consectetuer adipiscing elit. Nullam cursus dolor non lacus. Aenean"
+					  " vitae orci. Mauris vulputate ornare urna.")</p>
+					<!--
+					<p>$!_("Click the following link to retrieve you lost password.")<br>
+					<a href="https://members.foo.bar/members/lostpwd.php"><b>$!_("Retrieve my lost password")</b></a></p>
+					-->
+				</div>
+				<div id="otpInfo" class="infoBox">
+					<h4><a href="#mainInfo" class="hideInfo" id="otpInfoHide">$!_("Hide this Information")</a> <a href="#l2header" class="toTop">$!_("Back"
+					  " to Top")</a></h4>
+					<h3>$!_("Get a Token")</h3>
+					<p>$!_("Replace this with text about using one time passcodes. Lorem ipsum dolor sit amet,"
+					  " consectetuer adipiscing elit. Nullam cursus dolor non lacus. Aenean vitae orci."
+					  " Mauris vulputate ornare urna.")</p>
+				</div>
+				<div id="kx509Info" class="infoBox">
+					<h4><a href="#mainInfo" class="hideInfo" id="kx509InfoHide">$!_("Hide this Information")</a> <a href="#l2header" class="toTop">$!_("Back"
+					  " to Top")</a></h4>
+					<h3>$!_("Download KX.509")</h3>
+					<p>$!_("The KX.509 service provides a client/server application that uses Kerberos to"
+					  " acquire a short-term X.509 certificate. This makes it possible for web-browsers"
+					  " to authenticate a user to any CoSign-protected web services silently instead of"
+					  " prompting the user for a name and password. At U-M, this service can be used by"
+					  " those who know their Uniqname and Kerberos password.")</p>
+				</div>
+				<div id="inviteInfo" class="infoBox">
+					<h4><a href="#mainInfo" class="hideInfo" id="inviteInfoHide">$!_("Hide this Information")</a> <a href="#l2header" class="toTop">$!_("Back"
+					  " to Top")</a></h4>
+					<h3>$!_("About invite code")</h3>
+					<p>$!_("Invite code is assigned by administrator. Before input your invite code, you must provide your email address as your login name.")
+          </p>
+					<p>$!_("Note: The two fields, password and invite code input fields are exclusive. The other is disabled when one is focus and has inupt.")
+					</p>
+				</div>
diff --git a/html/inc/js_config.inc b/html/inc/js_config.inc
new file mode 100644
index 0000000..517d465
--- /dev/null
+++ b/html/inc/js_config.inc
@@ -0,0 +1,11 @@
+		cosign.addFactor(['ldap','friend'],'kerbTitle','kerberos');
+		cosign.addFactor('otp','otpTitle','otp');
+		cosign.addFactor('kx509','kx509Title','kx509');
+		cosign.addFactor('invite','inviteloginTitle','invitelogin');
+		cosign.addInfoBox('kerbInfo','kerbInfoShow','kerbInfoHide');
+		cosign.addInfoBox('otpInfo','otpInfoShow','otpInfoHide');
+		cosign.addInfoBox('kx509Info','kx509InfoShow','kx509InfoHide');
+		cosign.addInfoBox('inviteInfo','inviteInfoShow','inviteInfoHide');
+		cosign.setDefaultOpen('ldap');
+		//cosign.setDisabledFactors('otp,kx509');
+		cosign.initUI();
diff --git a/html/inc/zh/0000.html b/html/inc/zh/0000.html
new file mode 100644
index 0000000..cd6c895
--- /dev/null
+++ b/html/inc/zh/0000.html
@@ -0,0 +1,2 @@
+            <table border="0" cellpadding="4">
+              <tbody>
diff --git a/html/inc/zh/0010_wiki.html b/html/inc/zh/0010_wiki.html
new file mode 100644
index 0000000..d898006
--- /dev/null
+++ b/html/inc/zh/0010_wiki.html
@@ -0,0 +1,15 @@
+                <tr>
+                  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
+                  <td aligh='right' vliagn='middle'>
+                    <img src="/cosign/images/services/moinmoin.gif" alt="Wiki">
+                  </td>
+                  <td class="servicelist">
+                    <u>
+                    <a name="wiki" href="http://wiki.foo.bar/wiki/action/login/Main?action=login&login=1">知识管理系统</a>
+                    </u>
+                    <br>
+                    <div class="tooltip">
+                    采用维基技术，提供了协同工作平台和强大的社区网站，知识共享现在出发..oO
+                    </div>
+                  </td>
+                </tr>
diff --git a/html/inc/zh/0015_blog.html b/html/inc/zh/0015_blog.html
new file mode 100644
index 0000000..39fe5d3
--- /dev/null
+++ b/html/inc/zh/0015_blog.html
@@ -0,0 +1,15 @@
+                <tr>
+                  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
+                  <td aligh='right' vliagn='middle'>
+                    <img src="/cosign/images/services/blog.gif" alt="博客">
+                  </td>
+                  <td class="servicelist">
+                    <u>
+                    <a name="blog" href="http://blog.foo.bar/">博客</a>
+                    </u>
+                    <br>
+                    <div class="tooltip">
+                    大声的说出你的感受、观点、想法，和他人分享...
+                    </div>
+                  </td>
+                </tr>
diff --git a/html/inc/zh/0020_scm.html b/html/inc/zh/0020_scm.html
new file mode 100644
index 0000000..6ae825d
--- /dev/null
+++ b/html/inc/zh/0020_scm.html
@@ -0,0 +1,21 @@
+                <tr>
+                  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
+                  <td aligh='right' vliagn='top'>
+                    <img src="/cosign/images/services/subversion.gif" alt="Subversion">
+                  </td>
+                  <td class="servicelist">
+                    <u>
+                    版本控制系统： <a name="websvn" href="http://svn.foo.bar/websvn/">Subversion</a>, 
+                      <a name="git" href="http://git.foo.bar/">Git</a>,
+                      <a name="hg" href="http://hg.foo.bar/">Mercurial</a>
+                    </u>
+                    <br>
+                    <div class="tooltip">
+                    SVN - 商业软件开发最佳拍当，提供精细授权，有易用的客户端
+                    <br>
+                    Git - 适合于身处异地，相对分散的开发团队，最强大的版本控制工具
+                    <br>
+                    Hg - 轻量级分布式版本控制工具，既适用于个人，也适合于团队
+                    </div>
+                  </td>
+                </tr>
diff --git a/html/inc/zh/0030_bugtrac.html b/html/inc/zh/0030_bugtrac.html
new file mode 100644
index 0000000..da72ff4
--- /dev/null
+++ b/html/inc/zh/0030_bugtrac.html
@@ -0,0 +1,19 @@
+                <tr>
+                  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
+                  <td aligh='right' vliagn='middle'>
+                    <img src="/cosign/images/services/pm.gif" alt="Project Management">
+
+                  </td>
+                  <td class="servicelist">
+                    <u>
+                    项目管理系统： <a name="trac" href="http://trac.foo.bar/">Trac</a>,
+                    <a name="redmine" href="http://redmine.foo.bar/">Redmine</a>
+                    </u>
+                    <br>
+                    <div class="tooltip">
+                    Trac - Python 开发，用wiki将需求管理，缺陷跟踪，软件开发整合一体的项目管理工具
+                    <br>
+                    Redmine - Trac 的 ROR 克隆/再实现。支持多项目
+                    </div>
+                  </td>
+                </tr>
diff --git a/html/inc/zh/0035_testlink.html b/html/inc/zh/0035_testlink.html
new file mode 100644
index 0000000..fb3fbaa
--- /dev/null
+++ b/html/inc/zh/0035_testlink.html
@@ -0,0 +1,15 @@
+                <tr>
+                  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
+                  <td aligh='right' vliagn='middle'>
+                    <img src="/cosign/images/services/tl.gif" alt="Testlink">
+                  </td>
+                  <td class="servicelist">
+                    <u>
+                    测试管理平台： <a name="testlink" href="http://testlink.foo.bar/">TestLink</a>
+                    </u>
+                    <br>
+                    <div class="tooltip">
+                    从测试计划到测试用例到测试报告，全周期的测试流程管理平台...
+                    </div>
+                  </td>
+                </tr>
diff --git a/html/inc/zh/0040_comm.html b/html/inc/zh/0040_comm.html
new file mode 100644
index 0000000..1acf1d3
--- /dev/null
+++ b/html/inc/zh/0040_comm.html
@@ -0,0 +1,15 @@
+                <tr>
+                  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
+                  <td aligh='right' vliagn='middle'>
+                    <img src="/cosign/images/services/mailman.gif" alt="Mailman">
+                  </td>
+                  <td class="servicelist">
+                    <u>
+                    沟通系统： <a name="mailman" href="http://list.foo.bar/mailman/listinfo/">邮件列表</a>, 即时通讯
+                    </u>
+                    <br>
+                    <div class="tooltip">
+                    邮件列表: 可归档，可推向桌面的无骚扰的沟通工具...
+                    </div>
+                  </td>
+                </tr>
diff --git a/html/inc/zh/1000_account.html b/html/inc/zh/1000_account.html
new file mode 100644
index 0000000..086dbf6
--- /dev/null
+++ b/html/inc/zh/1000_account.html
@@ -0,0 +1,16 @@
+                <tr>
+                  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
+                  <td>
+                    <img src="/cosign/images/services/profile.gif" alt="Profiles">
+                  </td>
+                  <td class="servicelist">
+                    <u>
+                    集中管理系统： <a name="gosa" href="https://weblogin.foo.bar/members/?login">帐号管理</a>,
+                    <a name="sso" href="https://weblogin.foo.bar/cgi-bin/login">单点登录</a>
+                    </u>
+                    <br>
+                    <div class="tooltip">
+                    集中的用户管理平台；单点登录支持
+                    </div>
+                  </td>
+                </tr>
diff --git a/html/inc/zh/9000.html b/html/inc/zh/9000.html
new file mode 100644
index 0000000..a0203b7
--- /dev/null
+++ b/html/inc/zh/9000.html
@@ -0,0 +1,2 @@
+              </tbody>
+            </table>
diff --git a/html/locale/.gitignore b/html/locale/.gitignore
new file mode 100644
index 0000000..cd1f2c9
--- /dev/null
+++ b/html/locale/.gitignore
@@ -0,0 +1 @@
+*.mo
diff --git a/html/locale/Makefile b/html/locale/Makefile
new file mode 100644
index 0000000..ac98b36
--- /dev/null
+++ b/html/locale/Makefile
@@ -0,0 +1,33 @@
+POFILES = $(wildcard */LC_MESSAGES/*.po)
+MOFILES = $(POFILES:po=mo)
+DOMAIN = template
+
+all: mo
+
+po: $(POFILES)
+mo: $(MOFILES)
+pot: $(DOMAIN).pot
+
+$(POFILES): $(DOMAIN).pot
+	msgmerge $@ $< -o $@.new
+	mv $@.new $@
+
+$(DOMAIN).pot:
+	@if [ -d html ]; then  echo "Directory html already exist"; exit 1; fi 
+	@mkdir html
+	for from in ../*.html ../inc/*.inc; do \
+		to=html/$${from#../} ; \
+		ruby ../../locale/xgettext_format.rb -v $$from $$to ; \
+	done
+	xgettext --default-domain=$(DOMAIN) -L C -k_  \
+		--add-location \
+		-o $(DOMAIN).pot \
+		html/*.html html/inc/*.inc
+	@rm -rf html
+
+%.mo: %.po
+	msgfmt -o $@ $<
+
+#.PHONY: pot po mo $(DOMAIN).pot
+
+# vim: noet ts=4 sw=4
diff --git a/html/locale/template.pot b/html/locale/template.pot
new file mode 100644
index 0000000..ae704e2
--- /dev/null
+++ b/html/locale/template.pot
@@ -0,0 +1,296 @@
+# SOME DESCRIPTIVE TITLE.
+# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the PACKAGE package.
+# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
+#
+#, fuzzy
+msgid ""
+msgstr ""
+"Project-Id-Version: PACKAGE VERSION\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2012-02-15 15:31+0800\n"
+"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
+"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
+"Language-Team: LANGUAGE <LL@li.org>\n"
+"Language: \n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=CHARSET\n"
+"Content-Transfer-Encoding: 8bit\n"
+
+#: html/error.html:26
+msgid "Please contact technical support if you have any questions."
+msgstr ""
+
+#: html/error.html:27
+msgid "Technical Info:"
+msgstr ""
+
+#: html/error.html:31 html/inc/factor_login.inc:2
+#: html/inc/factor_login_reauth.inc:2
+msgid "ID &amp; Password"
+msgstr ""
+
+#: html/error.html:34 html/inc/factor_otp.inc:2
+msgid "One Time Passcode"
+msgstr ""
+
+#: html/error.html:37 html/inc/factor_kx509.inc:2
+msgid "Certificate"
+msgstr ""
+
+#: html/error.html:40 html/login.html:53 html/reauth.html:55
+msgid "Log In"
+msgstr ""
+
+#: html/services.html:7 html/services.html:20
+msgid "Welcome"
+msgstr ""
+
+#: html/services.html:27
+msgid "Manage your profile or change password"
+msgstr ""
+
+#: html/services.html:28
+msgid "Logout"
+msgstr ""
+
+#: html/services.html:32
+msgid "Services"
+msgstr ""
+
+#: html/verify-logout.html:30 html/verify-logout.html:35
+msgid "Log Out"
+msgstr ""
+
+#: html/verify-logout.html:31
+msgid ""
+"You are about to log out of <a href=\"/services/\">all weblogin "
+"applications</a>."
+msgstr ""
+
+#: html/verify-logout.html:32
+msgid "Are you sure you want to do this?"
+msgstr ""
+
+#: html/verify-logout.html:34
+msgid "Go Back"
+msgstr ""
+
+#: html/verify-logout.html:37
+msgid "After logout your browser will redirect to:"
+msgstr ""
+
+#: html/inc/factor_invite.inc:11
+msgid "Please input your email address into username field."
+msgstr ""
+
+#: html/inc/factor_invite.inc:17
+msgid "Please enter your login and password."
+msgstr ""
+
+#: html/inc/factor_invite.inc:59
+msgid "Invite Code"
+msgstr ""
+
+#: html/inc/factor_invite.inc:60 html/inc/factor_kx509.inc:3
+#: html/inc/factor_login.inc:3 html/inc/factor_login_reauth.inc:3
+#: html/inc/factor_otp.inc:3
+msgid "Authentication Complete"
+msgstr ""
+
+#: html/inc/factor_invite.inc:65
+msgid "The&nbsp;code"
+msgstr ""
+
+#: html/inc/factor_invite.inc:70 html/inc/factor_login.inc:21
+#: html/inc/factor_login_reauth.inc:18 html/inc/factor_otp.inc:13
+msgid "Caps Lock is on"
+msgstr ""
+
+#: html/inc/factor_invite.inc:73
+msgid "What is invite code?"
+msgstr ""
+
+#: html/inc/factor_kx509.inc:6
+msgid "You must have k.x-509 software installed and configured."
+msgstr ""
+
+#: html/inc/factor_kx509.inc:9
+msgid "Authenticate using a certificate"
+msgstr ""
+
+#: html/inc/factor_kx509.inc:11
+msgid "Download"
+msgstr ""
+
+#: html/inc/factor_kx509.inc:11
+msgid "k.x-509 software"
+msgstr ""
+
+#: html/inc/factor_login.inc:8 html/inc/factor_login_reauth.inc:8
+msgid "Username"
+msgstr ""
+
+#: html/inc/factor_login.inc:16 html/inc/factor_login_reauth.inc:13
+msgid "Password"
+msgstr ""
+
+#: html/inc/factor_login.inc:24 html/inc/factor_login_reauth.inc:21
+msgid "Need an account or password help?"
+msgstr ""
+
+#: html/inc/factor_login_reauth.inc:10
+msgid "Switch Users"
+msgstr ""
+
+#: html/inc/factor_otp.inc:8
+msgid "Passcode"
+msgstr ""
+
+#: html/inc/factor_otp.inc:16
+msgid "Manage your token"
+msgstr ""
+
+#: html/inc/footer.inc:1
+msgid ""
+"&copy; 2006 - 2012 <a href=\"http://www.umich.edu/~regents/\" title="
+"\"Regents of the University of Michigan\"> Regents of the University of "
+"Michigan</a>, <a href=\"http://www.ossxp.com/\">OSSXP Powered</a>"
+msgstr ""
+
+#: html/inc/header.inc:1
+msgid "Link to Homepage"
+msgstr ""
+
+#: html/inc/header.inc:3
+msgid "Our Home Page"
+msgstr ""
+
+#: html/inc/help_hotkey.inc:2
+msgid "Jump to the Web Login instructions"
+msgstr ""
+
+#: html/inc/help_hotkey.inc:3
+msgid "Jump to the error message (if present)"
+msgstr ""
+
+#: html/inc/help_hotkey.inc:4
+msgid "Jump to the ID and Password section"
+msgstr ""
+
+#: html/inc/help_hotkey.inc:5
+msgid "Jump to the One Time Passcode section"
+msgstr ""
+
+#: html/inc/help_hotkey.inc:6
+msgid "Jump to the Certificate section"
+msgstr ""
+
+#: html/inc/help_infobox.inc:2
+msgid ""
+"Please enter your authentication information and click the &quot;Log&nbsp;"
+"In&quot; button to continue."
+msgstr ""
+
+#: html/inc/help_infobox.inc:4
+msgid ""
+"Authentication sections marked with a <img src=\"/cosign/images/circle.gif\" "
+"alt=\"yellow circle\" /> are required."
+msgstr ""
+
+#: html/inc/help_infobox.inc:8
+msgid ""
+"By using this service you agree to adhere to our policies and guidelines."
+msgstr ""
+
+#: html/inc/help_infobox.inc:11
+msgid "This page displays best when JavaScript is enabled in your web browser."
+msgstr ""
+
+#: html/inc/help_infobox.inc:15 html/inc/help_infobox.inc:35
+#: html/inc/help_infobox.inc:43 html/inc/help_infobox.inc:53
+msgid "Hide this Information"
+msgstr ""
+
+#: html/inc/help_infobox.inc:15 html/inc/help_infobox.inc:35
+#: html/inc/help_infobox.inc:43 html/inc/help_infobox.inc:53
+msgid "Back to Top"
+msgstr ""
+
+#: html/inc/help_infobox.inc:17
+msgid "Need an Account?"
+msgstr ""
+
+#: html/inc/help_infobox.inc:18
+msgid ""
+"Replace this text with information about obtaining an account. Lorem ipsum "
+"dolor sit amet, consectetuer adipiscing elit. Nullam cursus dolor non lacus. "
+"Aenean vitae orci. Mauris vulputate ornare urna."
+msgstr ""
+
+#: html/inc/help_infobox.inc:22
+msgid "Click the following link to register a new account yourself."
+msgstr ""
+
+#: html/inc/help_infobox.inc:23
+msgid "Create an account now"
+msgstr ""
+
+#: html/inc/help_infobox.inc:25
+msgid "Forgot Your Password?"
+msgstr ""
+
+#: html/inc/help_infobox.inc:26
+msgid ""
+"Replace this text with information about resetting your password. Lorem "
+"ipsum dolor sit amet, consectetuer adipiscing elit. Nullam cursus dolor non "
+"lacus. Aenean vitae orci. Mauris vulputate ornare urna."
+msgstr ""
+
+#: html/inc/help_infobox.inc:30
+msgid "Click the following link to retrieve you lost password."
+msgstr ""
+
+#: html/inc/help_infobox.inc:31
+msgid "Retrieve my lost password"
+msgstr ""
+
+#: html/inc/help_infobox.inc:37
+msgid "Get a Token"
+msgstr ""
+
+#: html/inc/help_infobox.inc:38
+msgid ""
+"Replace this with text about using one time passcodes. Lorem ipsum dolor sit "
+"amet, consectetuer adipiscing elit. Nullam cursus dolor non lacus. Aenean "
+"vitae orci. Mauris vulputate ornare urna."
+msgstr ""
+
+#: html/inc/help_infobox.inc:45
+msgid "Download KX.509"
+msgstr ""
+
+#: html/inc/help_infobox.inc:46
+msgid ""
+"The KX.509 service provides a client/server application that uses Kerberos "
+"to acquire a short-term X.509 certificate. This makes it possible for web-"
+"browsers to authenticate a user to any CoSign-protected web services "
+"silently instead of prompting the user for a name and password. At U-M, this "
+"service can be used by those who know their Uniqname and Kerberos password."
+msgstr ""
+
+#: html/inc/help_infobox.inc:55
+msgid "About invite code"
+msgstr ""
+
+#: html/inc/help_infobox.inc:56
+msgid ""
+"Invite code is assigned by administrator. Before input your invite code, you "
+"must provide your email address as your login name."
+msgstr ""
+
+#: html/inc/help_infobox.inc:58
+msgid ""
+"Note: The two fields, password and invite code input fields are exclusive. "
+"The other is disabled when one is focus and has inupt."
+msgstr ""
diff --git a/html/locale/zh/LC_MESSAGES/template.po b/html/locale/zh/LC_MESSAGES/template.po
new file mode 100644
index 0000000..ab8b6e8
--- /dev/null
+++ b/html/locale/zh/LC_MESSAGES/template.po
@@ -0,0 +1,312 @@
+# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the PACKAGE package.
+#
+# Jiang Xin <worldhello.net@gmail.com>, 2010.
+msgid ""
+msgstr ""
+"Project-Id-Version: \n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2012-02-15 15:31+0800\n"
+"PO-Revision-Date: 2010-04-04 20:38+0800\n"
+"Last-Translator: Jiang Xin <worldhello.net@gmail.com>\n"
+"Language-Team: Chinese Simplified <kde-i18n-doc@kde.org>\n"
+"Language: \n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+"X-Generator: Lokalize 1.0\n"
+"Plural-Forms: nplurals=2; plural=n != 1;\n"
+
+#: html/error.html:26
+msgid "Please contact technical support if you have any questions."
+msgstr "如果您有问题，请联系管理员。"
+
+#: html/error.html:27
+msgid "Technical Info:"
+msgstr "技术信息："
+
+#: html/error.html:31 html/inc/factor_login.inc:2
+#: html/inc/factor_login_reauth.inc:2
+msgid "ID &amp; Password"
+msgstr "用户名和口令"
+
+#: html/error.html:34 html/inc/factor_otp.inc:2
+msgid "One Time Passcode"
+msgstr "一次性口令登录"
+
+#: html/error.html:37 html/inc/factor_kx509.inc:2
+msgid "Certificate"
+msgstr "证书"
+
+#: html/error.html:40 html/login.html:53 html/reauth.html:55
+msgid "Log In"
+msgstr "登录"
+
+#: html/services.html:7 html/services.html:20
+msgid "Welcome"
+msgstr "欢迎"
+
+#: html/services.html:27
+msgid "Manage your profile or change password"
+msgstr "修改个人信息及口令"
+
+#: html/services.html:28
+msgid "Logout"
+msgstr "退出登录"
+
+#: html/services.html:32
+msgid "Services"
+msgstr "服务列表"
+
+#: html/verify-logout.html:30 html/verify-logout.html:35
+msgid "Log Out"
+msgstr "退出"
+
+#: html/verify-logout.html:31
+msgid ""
+"You are about to log out of <a href=\"/services/\">all weblogin "
+"applications</a>."
+msgstr "您将要退出 <a href=\"/services/\">所有服务</a>。"
+
+#: html/verify-logout.html:32
+msgid "Are you sure you want to do this?"
+msgstr "您确认要这么做么？"
+
+#: html/verify-logout.html:34
+msgid "Go Back"
+msgstr "返回"
+
+#: html/verify-logout.html:37
+msgid "After logout your browser will redirect to:"
+msgstr "退出登录后浏览器将重定向到："
+
+#: html/inc/factor_invite.inc:11
+msgid "Please input your email address into username field."
+msgstr "请在用户名字段输入您的邮件地址。"
+
+#: html/inc/factor_invite.inc:17
+msgid "Please enter your login and password."
+msgstr "请输入您的用户名和口令。"
+
+#: html/inc/factor_invite.inc:59
+msgid "Invite Code"
+msgstr "邀请码认证"
+
+#: html/inc/factor_invite.inc:60 html/inc/factor_kx509.inc:3
+#: html/inc/factor_login.inc:3 html/inc/factor_login_reauth.inc:3
+#: html/inc/factor_otp.inc:3
+msgid "Authentication Complete"
+msgstr "认证成功"
+
+#: html/inc/factor_invite.inc:65
+msgid "The&nbsp;code"
+msgstr "邀请码"
+
+#: html/inc/factor_invite.inc:70 html/inc/factor_login.inc:21
+#: html/inc/factor_login_reauth.inc:18 html/inc/factor_otp.inc:13
+msgid "Caps Lock is on"
+msgstr "大小写锁定键开启"
+
+#: html/inc/factor_invite.inc:73
+msgid "What is invite code?"
+msgstr "什么是邀请码？"
+
+#: html/inc/factor_kx509.inc:6
+msgid "You must have k.x-509 software installed and configured."
+msgstr "您必须安装并配置 k.x-509 软件。"
+
+#: html/inc/factor_kx509.inc:9
+msgid "Authenticate using a certificate"
+msgstr "使用证书认证"
+
+#: html/inc/factor_kx509.inc:11
+msgid "Download"
+msgstr "下载"
+
+#: html/inc/factor_kx509.inc:11
+msgid "k.x-509 software"
+msgstr "k.x-509 软件"
+
+#: html/inc/factor_login.inc:8 html/inc/factor_login_reauth.inc:8
+msgid "Username"
+msgstr "用户名"
+
+#: html/inc/factor_login.inc:16 html/inc/factor_login_reauth.inc:13
+msgid "Password"
+msgstr "口令"
+
+#: html/inc/factor_login.inc:24 html/inc/factor_login_reauth.inc:21
+msgid "Need an account or password help?"
+msgstr "需要创建帐号或者找回口令？"
+
+#: html/inc/factor_login_reauth.inc:10
+msgid "Switch Users"
+msgstr "切换用户"
+
+#: html/inc/factor_otp.inc:8
+msgid "Passcode"
+msgstr "口令"
+
+#: html/inc/factor_otp.inc:16
+msgid "Manage your token"
+msgstr "管理你的密钥"
+
+#: html/inc/footer.inc:1
+msgid ""
+"&copy; 2006 - 2012 <a href=\"http://www.umich.edu/~regents/\" title="
+"\"Regents of the University of Michigan\"> Regents of the University of "
+"Michigan</a>, <a href=\"http://www.ossxp.com/\">OSSXP Powered</a>"
+msgstr ""
+"&copy; 2006 - 2012 <a href=\"http://www.umich.edu/~regents/\" title=\"密歇根"
+"大学\">密歇根大学</a>, <a href=\"http://www.ossxp.com/\">群英汇技术支持</a>"
+
+#: html/inc/header.inc:1
+msgid "Link to Homepage"
+msgstr "返回主页"
+
+#: html/inc/header.inc:3
+msgid "Our Home Page"
+msgstr "我们的主页"
+
+#: html/inc/help_hotkey.inc:2
+msgid "Jump to the Web Login instructions"
+msgstr "跳转到 Web 登录说明"
+
+#: html/inc/help_hotkey.inc:3
+msgid "Jump to the error message (if present)"
+msgstr "跳转到错误信息（如果有的话）"
+
+#: html/inc/help_hotkey.inc:4
+msgid "Jump to the ID and Password section"
+msgstr "跳转到用户名和口令登录"
+
+#: html/inc/help_hotkey.inc:5
+msgid "Jump to the One Time Passcode section"
+msgstr "跳转到一次性口令登录"
+
+#: html/inc/help_hotkey.inc:6
+msgid "Jump to the Certificate section"
+msgstr "跳转到证书登录"
+
+#: html/inc/help_infobox.inc:2
+msgid ""
+"Please enter your authentication information and click the &quot;Log&nbsp;"
+"In&quot; button to continue."
+msgstr ""
+"在右侧选择任一种登录方式，输入登录信息，之后按 &quot;登录按钮&quot; 完成登"
+"录。"
+
+#: html/inc/help_infobox.inc:4
+msgid ""
+"Authentication sections marked with a <img src=\"/cosign/images/circle.gif\" "
+"alt=\"yellow circle\" /> are required."
+msgstr ""
+"标记为 <img src=\"/cosign/images/circle.gif\" alt=\"黄色圆圈\" /> 的认证方式"
+"是必须的。"
+
+#: html/inc/help_infobox.inc:8
+msgid ""
+"By using this service you agree to adhere to our policies and guidelines."
+msgstr "使用本服务，意味着您已经接受我们的相关政策条款。"
+
+#: html/inc/help_infobox.inc:11
+msgid "This page displays best when JavaScript is enabled in your web browser."
+msgstr "这个页面在 JavaScript 启用下有更好的表现。"
+
+#: html/inc/help_infobox.inc:15 html/inc/help_infobox.inc:35
+#: html/inc/help_infobox.inc:43 html/inc/help_infobox.inc:53
+msgid "Hide this Information"
+msgstr "隐藏本信息"
+
+#: html/inc/help_infobox.inc:15 html/inc/help_infobox.inc:35
+#: html/inc/help_infobox.inc:43 html/inc/help_infobox.inc:53
+msgid "Back to Top"
+msgstr "返回顶部"
+
+#: html/inc/help_infobox.inc:17
+msgid "Need an Account?"
+msgstr "需要创建帐号？"
+
+#: html/inc/help_infobox.inc:18
+msgid ""
+"Replace this text with information about obtaining an account. Lorem ipsum "
+"dolor sit amet, consectetuer adipiscing elit. Nullam cursus dolor non lacus. "
+"Aenean vitae orci. Mauris vulputate ornare urna."
+msgstr "替换本段内容为创建帐号的相关指示..."
+
+#: html/inc/help_infobox.inc:22
+msgid "Click the following link to register a new account yourself."
+msgstr "点击下面的链接，注册一个新帐号"
+
+#: html/inc/help_infobox.inc:23
+msgid "Create an account now"
+msgstr "创建一个新帐号"
+
+#: html/inc/help_infobox.inc:25
+msgid "Forgot Your Password?"
+msgstr "忘记口令？"
+
+#: html/inc/help_infobox.inc:26
+msgid ""
+"Replace this text with information about resetting your password. Lorem "
+"ipsum dolor sit amet, consectetuer adipiscing elit. Nullam cursus dolor non "
+"lacus. Aenean vitae orci. Mauris vulputate ornare urna."
+msgstr "替换本段内容为重置密码的相关指示..."
+
+#: html/inc/help_infobox.inc:30
+msgid "Click the following link to retrieve you lost password."
+msgstr "点击下面的链接，找回你忘记的口令"
+
+#: html/inc/help_infobox.inc:31
+msgid "Retrieve my lost password"
+msgstr "找回忘记的口令"
+
+#: html/inc/help_infobox.inc:37
+msgid "Get a Token"
+msgstr "获取一个令牌"
+
+#: html/inc/help_infobox.inc:38
+msgid ""
+"Replace this with text about using one time passcodes. Lorem ipsum dolor sit "
+"amet, consectetuer adipiscing elit. Nullam cursus dolor non lacus. Aenean "
+"vitae orci. Mauris vulputate ornare urna."
+msgstr "替换本段内容为一次性口令的相关指示..."
+
+#: html/inc/help_infobox.inc:45
+msgid "Download KX.509"
+msgstr "下载 KX.509"
+
+#: html/inc/help_infobox.inc:46
+msgid ""
+"The KX.509 service provides a client/server application that uses Kerberos "
+"to acquire a short-term X.509 certificate. This makes it possible for web-"
+"browsers to authenticate a user to any CoSign-protected web services "
+"silently instead of prompting the user for a name and password. At U-M, this "
+"service can be used by those who know their Uniqname and Kerberos password."
+msgstr ""
+"服务 KX.509 提供了一个 客户端/服务器 应用，使用 Kerberos 来获取一个短期的 "
+"X.509 证书。使得浏览器连接任何 CoSign 保护的网站不再需要输入用户名和口令，而"
+"自动登录。 在密歇根大学，这项服务由知道唯一名称和 Kerberos 口令的用户使用。"
+
+#: html/inc/help_infobox.inc:55
+msgid "About invite code"
+msgstr "关于邀请码"
+
+#: html/inc/help_infobox.inc:56
+msgid ""
+"Invite code is assigned by administrator. Before input your invite code, you "
+"must provide your email address as your login name."
+msgstr ""
+"邀请码由管理员进行设置，为特殊用户提供无须用户注册即可访问某些服务。 注意在输"
+"入邀请码的同时，您需要在登录名字段输入您的邮件地址。"
+
+#: html/inc/help_infobox.inc:58
+msgid ""
+"Note: The two fields, password and invite code input fields are exclusive. "
+"The other is disabled when one is focus and has inupt."
+msgstr ""
+"注意：口令字段和邀请码字段互斥。当选择其中之一并且输入了口令或者邀请码则另外"
+"一个字段自动禁用， 直到您将当前的口令或者邀请码录入框的内容清空。"
+
+#~ msgid "Login"
+#~ msgstr "登录"
diff --git a/html/login.html b/html/login.html
index 98fa0e1..fea910e 100755
--- a/html/login.html
+++ b/html/login.html
@@ -1,12 +1,12 @@
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
+<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <meta http-equiv="Pragma" content="no-cache" />
 <meta http-equiv="Expires" content="Monday, 16-Apr-73 13:10:00 GMT" />
 <title>$t</title>
 <style type="text/css" media="screen">
-/* <![CDATA[ */@import "/cosign/cosign_base.css"/**/;/* ]]> */
+$!include(inc/css.inc)
 </style>
 <script type="text/javascript" src="/cosign/js/prototype.js"></script>
 <script type="text/javascript" src="/cosign/js/scriptaculous.js"></script>
@@ -21,78 +21,21 @@
 	window.onload = function() {
 		var cosign = new Cosign('$f');
 		cosign.setSatisfied('$d');
-		cosign.addFactor(['friend','UMICH.EDU'],'kerbTitle','kerberos');
-		cosign.addFactor('otp','otpTitle','otp');
-		cosign.addFactor('kx509','kx509Title','kx509');
-		cosign.addInfoBox('kerbInfo','kerbInfoShow','kerbInfoHide');
-		cosign.addInfoBox('otpInfo','otpInfoShow','otpInfoHide');
-		cosign.addInfoBox('kx509Info','kx509InfoShow','kx509InfoHide');
-		cosign.initUI();
+		$!include(inc/js_config.inc)
 	}
-	</script>
+</script>
 </head>
 <body>
 <div id="page">
-	<div id="head"> <a id="mast" href="#" title="Link to Homepage"><span>
-		<!--A small logo for when CSS is disabled goes here. <img src="#" alt="" width="16" height="16" />//-->
-		</span> <strong>Our Home Page</strong></a> </div>
+  $!include(inc/%lang%/header.inc)
 	<hr class="text" />
-	<ul class="text">
-		<li><a href="#instruct" title="Jump to the Web Login instructions [ALT + 1 Windows / CONTROL + 1 Mac]" accesskey="1">Jump
-				to the Web Login instructions</a></li>
-		<li><a href="#error" title="Jump to the error message (if present) [ALT + 2 Windows / CONTROL + 2 Mac]" accesskey="2">Jump
-				to the error message (if present)</a></li>
-		<li><a href="#kerberos" title="Jump to the ID and Password section [ALT + 3 Windows / CONTROL + 3 Mac]" accesskey="3">Jump
-				to the ID and Password section</a></li>
-		<li><a href="#otp" title="Jump to the One Time Passcode section [ALT + 4 Windows / CONTROL + 4 Mac]"  accesskey="4">Jump
-				to the One Time Passcode section</a></li>
-		<li><a href="#kx509" title="Jump to the Certificate section [ALT + 5 Windows / CONTROL + 5 Mac]" accesskey="5">Jump
-				to the Certificate section</a></li>
-	</ul>
+	$!include(inc/help_hotkey.inc)
 	<hr class="text" />
 	<div id="main">
 		<div id="uiRow">
 			<div id="leftUIcol">
-				<h1 id="instruct">Authentication Required</h1>
-				<p>Please enter your authentication information and click the &quot;Log&nbsp;In&quot; button
-					to continue.</p>
-				<p class="jsOnly">Authentication
-				sections marked with a <img
-				src="/cosign/images/circle.gif" alt="yellow circle" /> are
-					required.</p>
-				<p>By using this service you agree to adhere to our policies and guidelines.</p>
-				<p class="noScript">This page displays best when JavaScript is enabled in your web
-					browser.</p>
-				<div id="kerbInfo" class="infoBox">
-					<h4><a href="#mainInfo" class="hideInfo" id="kerbInfoHide">Hide this Information</a> <a href="#l2header" class="toTop">Back
-							to Top</a></h4>
-					<h3>Need an Account?</h3>
-					<p>Replace this text with information about obtaining an account. Lorem ipsum dolor
-						sit amet, consectetuer adipiscing elit. Nullam cursus dolor non lacus. Aenean vitae
-						orci. Mauris vulputate ornare urna.</p>
-					<h3>Forgot Your Password?</h3>
-					<p>Replace this text with information about resetting your password. Lorem ipsum
-						dolor sit amet, consectetuer adipiscing elit. Nullam cursus dolor non lacus. Aenean
-						vitae orci. Mauris vulputate ornare urna.</p>
-				</div>
-				<div id="otpInfo" class="infoBox">
-					<h4><a href="#mainInfo" class="hideInfo" id="otpInfoHide">Hide this Information</a> <a href="#l2header" class="toTop">Back
-							to Top</a></h4>
-					<h3>Get a Token</h3>
-					<p>Replace this with text about using one time passcodes. Lorem ipsum dolor sit amet,
-						consectetuer adipiscing elit. Nullam cursus dolor non lacus. Aenean vitae orci.
-						Mauris vulputate ornare urna.</p>
-				</div>
-				<div id="kx509Info" class="infoBox">
-					<h4><a href="#mainInfo" class="hideInfo" id="kx509InfoHide">Hide this Information</a> <a href="#l2header" class="toTop">Back
-							to Top</a></h4>
-					<h3>Download KX.509</h3>
-					<p>The KX.509 service provides a client/server application that uses Kerberos to
-						acquire a short-term X.509 certificate. This makes it possible for web-browsers
-						to authenticate a user to any CoSign-protected web services silently instead of
-						prompting the user for a name and password. At U-M, this service can be used by
-						those who know their Uniqname and Kerberos password.</p>
-				</div>
+				<h1 id="instruct">$t</h1>
+				$!include(inc/help_infobox.inc)
 			</div>
 			<form action="/cgi-bin/login" method="post" name="factors" id="rightUIcol">
 				<input type="hidden" name="required"
@@ -101,56 +44,13 @@
 				value="$r" />
 				<input type="hidden" name="service"
 				value="$c" />
-				<!--div id="error">$e</div-->
-				<div class="factorHead"> <a href="#" tabindex="10">Help</a>
-					<h2 id="kerbTitle"><span>&nbsp;</span>ID &amp; Password</h2>
-					<div class="authComplete" style="display: none;">Authentication Complete</div>
-				</div>
-				<div class="factor" id="kerberos">
-					<table>
-						<tr>
-							<td><label for="login">Login</label></td>
-							<td><input id="login" name="login" type="text" value="" size="18" tabindex="1" /></td>
-						</tr>
-						<tr>
-							<td><label for="password">Password</label></td>
-							<td><input id="password" name="password" type="password" value="" size="18" tabindex="2" /></td>
-						</tr>
-						<tr class="capsLock" style="display: none;">
-							<td>&nbsp;</td>
-							<td>Caps Lock is on</td>
-						</tr>
-					</table>
-					Need <a href="#kerbInfo" id="kerbInfoShow" tabindex="7">an account or password help?</a> </div>
-				<div class="factorHead"> <a href="#" tabindex="11">Help</a>
-					<h2 id="otpTitle"><span>&nbsp;</span>One Time Passcode</h2>
-					<div class="authComplete" style="display: none;">Authentication Complete</div>
-				</div>
-				<div class="factor" id="otp">
-					<table>
-						<tr>
-							<td><label for="passcode" id="pCodeLabel">Passcode</label></td>
-							<td><input id="passcode" name="passcode" type="password" value="" size="18" tabindex="3" /></td>
-						</tr>
-						<tr class="capsLock" style="display: none;">
-							<td>&nbsp;</td>
-							<td>Caps Lock is on</td>
-						</tr>
-					</table>
-					Manage your <a href="#otpInfo" id="otpInfoShow" tabindex="8">token</a> </div>
-				<div class="factorHead"> <a href="#" tabindex="12">Help</a>
-					<h2 id="kx509Title"><span>&nbsp;</span>Certificate</h2>
-					<div class="authComplete" style="display: none;">Authentication Complete</div>
-				</div>
-				<div class="factor" id="kx509">
-					<p class="note">You must have k.x-509 software installed and configured.</p>
-					<p>
-						<input name="useKX509" id="useKX509" type="checkbox" value="1" tabindex="5" />
-						<label for="useKX509">Authenticate using a certificate</label>
-					</p>
-					Download <a href="#kx509Info" id="kx509InfoShow" tabindex="9">k.x-509 software</a> </div>
+				<div id="error" style="display: none;">$e</div>
+				$!include(inc/factor_login.inc)
+				$!include(inc/factor_otp.inc)
+				$!include(inc/factor_kx509.inc)
+				$!include(inc/factor_invite.inc)
 				<div id="loginButton">
-					<input type="submit" name="doLogin" value="Log In" tabindex="6" />
+					<input type="submit" name="doLogin" value="$!_("Log In")" tabindex="6" />
 				</div>
 			</form>
 			<div class="clear">&nbsp;</div>
@@ -158,7 +58,6 @@
 		<div id="uiBottom">&nbsp;</div>
 	</div>
 </div>
-<div id="foot">&copy; 2006 <a href="http://www.umich.edu/~regents/" title="Regents of the University of Michigan"> Regents
-		of the University of Michigan</a> </div>
+$!include(inc/%lang%/footer.inc)
 </body>
 </html>
diff --git a/html/login_error.html b/html/login_error.html
deleted file mode 100755
index 3cf1c94..0000000
--- a/html/login_error.html
+++ /dev/null
@@ -1,168 +0,0 @@
-<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
-<meta http-equiv="Pragma" content="no-cache" />
-<meta http-equiv="Expires" content="Monday, 16-Apr-73 13:10:00 GMT" />
-<title>$t</title>
-<style type="text/css" media="screen">
-/* <![CDATA[ */@import "/cosign/cosign_base.css"/**/;/* ]]> */
-</style>
-<script type="text/javascript" src="/cosign/js/prototype.js"></script>
-<script type="text/javascript" src="/cosign/js/scriptaculous.js"></script>
-<script type="text/javascript" src="/cosign/js/effects.js"></script>
-<script type="text/javascript" src="/cosign/js/cosign.js"></script>
-<script type="text/javascript">
-	var link = document.createElement('link');
-	link.setAttribute('rel', 'stylesheet');
-	link.setAttribute('type', 'text/css');
-	link.setAttribute('href', '/cosign/cosign_js.css');
-	document.getElementsByTagName('head')[0].appendChild(link);
-	window.onload = function() {
-		var cosign = new Cosign('$f');
-		cosign.setSatisfied('$d');
-		cosign.addFactor(['friend','UMICH.EDU'],'kerbTitle','kerberos');
-		cosign.addFactor('otp','otpTitle','otp');
-		cosign.addFactor('kx509','kx509Title','kx509');
-		cosign.addInfoBox('kerbInfo','kerbInfoShow','kerbInfoHide');
-		cosign.addInfoBox('otpInfo','otpInfoShow','otpInfoHide');
-		cosign.addInfoBox('kx509Info','kx509InfoShow','kx509InfoHide');
-		cosign.initUI();
-	}
-	</script>
-</head>
-<body>
-<div id="page">
-	<div id="head"> <a id="mast" href="#" title="Link to Homepage"><span>
-		<!--A small logo for when CSS is disabled goes here. <img src="#" alt="" width="16" height="16" />//-->
-		</span> <strong>Our Home Page</strong></a> </div>
-	<hr class="text" />
-	<ul class="text">
-		<li><a href="#instruct" title="Jump to the Web Login instructions [ALT + 1 Windows / CONTROL + 1 Mac]" accesskey="1">Jump
-				to the Web Login instructions</a></li>
-		<li><a href="#error" title="Jump to the error message (if present) [ALT + 2 Windows / CONTROL + 2 Mac]" accesskey="2">Jump
-				to the error message (if present)</a></li>
-		<li><a href="#kerberos" title="Jump to the ID and Password section [ALT + 3 Windows / CONTROL + 3 Mac]" accesskey="3">Jump
-				to the ID and Password section</a></li>
-		<li><a href="#otp" title="Jump to the One Time Passcode section [ALT + 4 Windows / CONTROL + 4 Mac]"  accesskey="4">Jump
-				to the One Time Passcode section</a></li>
-		<li><a href="#kx509" title="Jump to the Certificate section [ALT + 5 Windows / CONTROL + 5 Mac]" accesskey="5">Jump
-				to the Certificate section</a></li>
-	</ul>
-	<hr class="text" />
-	<div id="main">
-		<div id="uiRow">
-			<div id="leftUIcol">
-				<h1 id="instruct">Authentication Required</h1>
-				<p>Please enter your authentication information and click the &quot;Log&nbsp;In&quot; button
-					to continue.</p>
-				<p class="jsOnly">Authentication
-				sections marked with a <img
-				src="/cosign/images/circle.gif" alt="yellow circle" /> are
-					required.</p>
-				<p>By using this service you agree to adhere to our policies and guidelines.</p>
-				<p class="noScript">This page displays best when JavaScript is enabled in your web
-					browser.</p>
-				<div id="kerbInfo" class="infoBox">
-					<h4><a href="#mainInfo" class="hideInfo" id="kerbInfoHide">Hide this Information</a> <a href="#l2header" class="toTop">Back
-							to Top</a></h4>
-					<h3>Need an Account?</h3>
-					<p>Replace this text with information about obtaining an account. Lorem ipsum dolor
-						sit amet, consectetuer adipiscing elit. Nullam cursus dolor non lacus. Aenean vitae
-						orci. Mauris vulputate ornare urna.</p>
-					<h3>Forgot Your Password?</h3>
-					<p>Replace this text with information about resetting your password. Lorem ipsum
-						dolor sit amet, consectetuer adipiscing elit. Nullam cursus dolor non lacus. Aenean
-						vitae orci. Mauris vulputate ornare urna.</p>
-				</div>
-				<div id="otpInfo" class="infoBox">
-					<h4><a href="#mainInfo" class="hideInfo" id="otpInfoHide">Hide this Information</a> <a href="#l2header" class="toTop">Back
-							to Top</a></h4>
-					<h3>Get a Token</h3>
-					<p>Replace this with text about using one time passcodes. Lorem ipsum dolor sit amet,
-						consectetuer adipiscing elit. Nullam cursus dolor non lacus. Aenean vitae orci.
-						Mauris vulputate ornare urna.</p>
-				</div>
-				<div id="kx509Info" class="infoBox">
-					<h4><a href="#mainInfo" class="hideInfo" id="kx509InfoHide">Hide this Information</a> <a href="#l2header" class="toTop">Back
-							to Top</a></h4>
-					<h3>Download KX.509</h3>
-					<p>The KX.509 service provides a client/server application that uses Kerberos to
-						acquire a short-term X.509 certificate. This makes it possible for web-browsers
-						to authenticate a user to any CoSign-protected web services silently instead of
-						prompting the user for a name and password. At U-M, this service can be used by
-						those who know their Uniqname and Kerberos password.</p>
-				</div>
-			</div>
-			<form action="/cgi-bin/login" method="post" name="factors" id="rightUIcol">
-				<input type="hidden" name="required"
-				value="$f" />
-				<input type="hidden" name="ref"
-				value="$r" />
-				<input type="hidden" name="service"
-				value="$c" />
-				<div id="error">$e</div>
-				<div class="factorHead"> <a href="#" tabindex="10">Help</a>
-					<h2 id="kerbTitle"><span>&nbsp;</span>ID &amp; Password</h2>
-					<div class="authComplete" style="display: none;">Authentication Complete</div>
-				</div>
-				<div class="factor" id="kerberos">
-					<table>
-						<tr>
-							<td><label for="login">Login</label></td>
-							<td><input
-							id="login"
-							name="login"
-							type="text"
-							value="$l" size="18" tabindex="1" /></td>
-						</tr>
-						<tr>
-							<td><label for="password">Password</label></td>
-							<td><input id="password" name="password" type="password" value="" size="18" tabindex="2" /></td>
-						</tr>
-						<tr class="capsLock" style="display: none;">
-							<td>&nbsp;</td>
-							<td>Caps Lock is on</td>
-						</tr>
-					</table>
-					Need <a href="#kerbInfo" id="kerbInfoShow" tabindex="7">an account or password help?</a> </div>
-				<div class="factorHead"> <a href="#" tabindex="11">Help</a>
-					<h2 id="otpTitle"><span>&nbsp;</span>One Time Passcode</h2>
-					<div class="authComplete" style="display: none;">Authentication Complete</div>
-				</div>
-				<div class="factor" id="otp">
-					<table>
-						<tr>
-							<td><label for="passcode" id="pCodeLabel">Passcode</label></td>
-							<td><input id="passcode" name="passcode" type="password" value="" size="18" tabindex="3" /></td>
-						</tr>
-						<tr class="capsLock" style="display: none;">
-							<td>&nbsp;</td>
-							<td>Caps Lock is on</td>
-						</tr>
-					</table>
-					Manage your <a href="#otpInfo" id="otpInfoShow" tabindex="8">token</a> </div>
-				<div class="factorHead"> <a href="#" tabindex="12">Help</a>
-					<h2 id="kx509Title"><span>&nbsp;</span>Certificate</h2>
-					<div class="authComplete" style="display: none;">Authentication Complete</div>
-				</div>
-				<div class="factor" id="kx509">
-					<p class="note">You must have k.x-509 software installed and configured.</p>
-					<p>
-						<input name="useKX509" id="useKX509" type="checkbox" value="1" tabindex="5" />
-						<label for="useKX509">Authenticate using a certificate</label>
-					</p>
-					Download <a href="#kx509Info" id="kx509InfoShow" tabindex="9">k.x-509 software</a> </div>
-				<div id="loginButton">
-					<input type="submit" name="doLogin" value="Log In" tabindex="6" />
-				</div>
-			</form>
-			<div class="clear">&nbsp;</div>
-		</div>
-		<div id="uiBottom">&nbsp;</div>
-	</div>
-</div>
-<div id="foot">&copy; 2006 <a href="http://www.umich.edu/~regents/" title="Regents of the University of Michigan"> Regents
-		of the University of Michigan</a> </div>
-</body>
-</html>
diff --git a/html/looping.html b/html/looping.html
deleted file mode 100755
index a667522..0000000
--- a/html/looping.html
+++ /dev/null
@@ -1,54 +0,0 @@
-<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
-<meta http-equiv="Pragma" content="no-cache" />
-<meta http-equiv="Expires" content="Monday, 16-Apr-73 13:10:00 GMT" />
-<title>$t</title>
-<style type="text/css" media="screen">
-/* <![CDATA[ */@import "/cosign/cosign_base.css"/**/;/* ]]> */
-
-#rightUIcol .factorHead h2 {
-	background: none;
-	color: #999;
-}
-</style>
-</head>
-<body>
-<div id="page">
-	<div id="head"> <a id="mast" href="#" title="Link to Homepage"><span>
-		<!--A small logo for when CSS is disabled goes here. <img src="#" alt="" width="16" height="16" />//-->
-		</span> <strong>Our Home Page</strong></a> </div>
-	<div id="main">
-		<div id="uiRow">
-			<div id="leftUIcol">
-				<h1 class="error">$t</h1>
-				<p>
-				$m
-				<p>Please contact <a href="#">Technical Support (put URL here)</a> if you have any questions.</p>
-				<p><a href="#">Put URL to main CoSign page here</a></p>
-				<p class="techInfo"><strong>Technical Info:</strong> $e</p>
-			</div>
-			<form action="#" method="post" name="factors" id="rightUIcol">
-				<div class="factorHead">
-					<h2>ID &amp; Password</h2>
-				</div>
-				<div class="factorHead">
-					<h2>One Time Passcode</h2>
-				</div>
-				<div class="factorHead">
-					<h2>Certificate</h2>
-				</div>
-				<div id="loginButton">
-					<input type="submit" name="doLogin" value="Log In" disabled="disabled" />
-				</div>
-			</form>
-			<div class="clear">&nbsp;</div>
-		</div>
-		<div id="uiBottom">&nbsp;</div>
-	</div>
-</div>
-<div id="foot">&copy; 2006 <a href="http://www.umich.edu/~regents/" title="Regents of the University of Michigan"> Regents
-		of the University of Michigan</a> </div>
-</body>
-</html>
diff --git a/html/post_error.html b/html/post_error.html
deleted file mode 100755
index a667522..0000000
--- a/html/post_error.html
+++ /dev/null
@@ -1,54 +0,0 @@
-<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
-<meta http-equiv="Pragma" content="no-cache" />
-<meta http-equiv="Expires" content="Monday, 16-Apr-73 13:10:00 GMT" />
-<title>$t</title>
-<style type="text/css" media="screen">
-/* <![CDATA[ */@import "/cosign/cosign_base.css"/**/;/* ]]> */
-
-#rightUIcol .factorHead h2 {
-	background: none;
-	color: #999;
-}
-</style>
-</head>
-<body>
-<div id="page">
-	<div id="head"> <a id="mast" href="#" title="Link to Homepage"><span>
-		<!--A small logo for when CSS is disabled goes here. <img src="#" alt="" width="16" height="16" />//-->
-		</span> <strong>Our Home Page</strong></a> </div>
-	<div id="main">
-		<div id="uiRow">
-			<div id="leftUIcol">
-				<h1 class="error">$t</h1>
-				<p>
-				$m
-				<p>Please contact <a href="#">Technical Support (put URL here)</a> if you have any questions.</p>
-				<p><a href="#">Put URL to main CoSign page here</a></p>
-				<p class="techInfo"><strong>Technical Info:</strong> $e</p>
-			</div>
-			<form action="#" method="post" name="factors" id="rightUIcol">
-				<div class="factorHead">
-					<h2>ID &amp; Password</h2>
-				</div>
-				<div class="factorHead">
-					<h2>One Time Passcode</h2>
-				</div>
-				<div class="factorHead">
-					<h2>Certificate</h2>
-				</div>
-				<div id="loginButton">
-					<input type="submit" name="doLogin" value="Log In" disabled="disabled" />
-				</div>
-			</form>
-			<div class="clear">&nbsp;</div>
-		</div>
-		<div id="uiBottom">&nbsp;</div>
-	</div>
-</div>
-<div id="foot">&copy; 2006 <a href="http://www.umich.edu/~regents/" title="Regents of the University of Michigan"> Regents
-		of the University of Michigan</a> </div>
-</body>
-</html>
diff --git a/html/reauth.html b/html/reauth.html
index c70b0f2..209aaf8 100755
--- a/html/reauth.html
+++ b/html/reauth.html
@@ -1,12 +1,12 @@
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
+<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <meta http-equiv="Pragma" content="no-cache" />
 <meta http-equiv="Expires" content="Monday, 16-Apr-73 13:10:00 GMT" />
 <title>$t</title>
 <style type="text/css" media="screen">
-/* <![CDATA[ */@import "/cosign/cosign_base.css"/**/;/* ]]> */
+$!include(inc/css.inc)
 </style>
 <script type="text/javascript" src="/cosign/js/prototype.js"></script>
 <script type="text/javascript" src="/cosign/js/scriptaculous.js"></script>
@@ -20,141 +20,39 @@
 	document.getElementsByTagName('head')[0].appendChild(link);
 	window.onload = function() {
 		var cosign = new Cosign('$f');
-		cosign.setDefaultOpen( 'UMICH.EDU' );
-		cosign.addFactor(['friend','UMICH.EDU'],'kerbTitle','kerberos');
-		cosign.addFactor('otp','otpTitle','otp');
-		cosign.addFactor('kx509','kx509Title','kx509');
-		cosign.addInfoBox('kerbInfo','kerbInfoShow','kerbInfoHide');
-		cosign.addInfoBox('otpInfo','otpInfoShow','otpInfoHide');
-		cosign.addInfoBox('kx509Info','kx509InfoShow','kx509InfoHide');
 		cosign.setSubmitLink('switchUserL', 'switchUserForm');
 		cosign.setSubmitLink('switchUserR', 'switchUserForm');
-		cosign.initUI();
+		$!include(inc/js_config.inc)
 	}
-	</script>
+</script>
 </head>
 <body>
 <div id="page">
-	<div id="head"> <a id="mast" href="#" title="Link to Homepage"><span>
-		<!--A small logo for when CSS is disabled goes here. <img src="#" alt="" width="16" height="16" />//-->
-		</span> <strong>Our Home Page</strong></a> </div>
+  $!include(inc/%lang%/header.inc)
 	<hr class="text" />
-	<ul class="text">
-		<li><a href="#instruct" title="Jump to the Web Login instructions [ALT + 1 Windows / CONTROL + 1 Mac]" accesskey="1">Jump
-				to the Web Login instructions</a></li>
-		<li><a href="#error" title="Jump to the error message (if present) [ALT + 2 Windows / CONTROL + 2 Mac]" accesskey="2">Jump
-				to the error message (if present)</a></li>
-		<li><a href="#kerberos" title="Jump to the ID and Password section [ALT + 3 Windows / CONTROL + 3 Mac]" accesskey="3">Jump
-				to the ID and Password section</a></li>
-		<li><a href="#otp" title="Jump to the One Time Passcode section [ALT + 4 Windows / CONTROL + 4 Mac]"  accesskey="4">Jump
-				to the One Time Passcode section</a></li>
-		<li><a href="#kx509" title="Jump to the Certificate section [ALT + 5 Windows / CONTROL + 5 Mac]" accesskey="5">Jump
-				to the Certificate section</a></li>
-	</ul>
+	$!include(inc/help_hotkey.inc)
 	<hr class="text" />
 	<div id="main">
 		<div id="uiRow">
 			<div id="leftUIcol">
-				<h1 id="instruct">Re-Authentication Required</h1>
-				<p>To protect your personal information, you must verify your password. Please type
-					your password and click the Re-Authenticate button to continue.</p>
-				<p>If you are not $l, you may <a href="/cgi-bin/logout" id="switchUserL">Switch
-						Users</a> and log in as yourself.</p>
-				<p class="jsOnly">Authentication
-				sections marked with a <img
-				src="/cosign/images/circle.gif" alt="yellow circle" /> are
-					required.</p>
-				<p>By using this service you agree to adhere to our policies and guidelines.</p>
-				<p class="noScript">This page displays best when JavaScript is enabled in your web
-					browser.</p>
-				<div id="kerbInfo" class="infoBox">
-					<h4><a href="#mainInfo" class="hideInfo" id="kerbInfoHide">Hide this Information</a> <a href="#l2header" class="toTop">Back
-							to Top</a></h4>
-					<h3>Need an Account?</h3>
-					<p>Replace this text with information about obtaining an account. Lorem ipsum dolor
-						sit amet, consectetuer adipiscing elit. Nullam cursus dolor non lacus. Aenean vitae
-						orci. Mauris vulputate ornare urna.</p>
-					<h3>Forgot Your Password?</h3>
-					<p>Replace this text with information about resetting your password. Lorem ipsum
-						dolor sit amet, consectetuer adipiscing elit. Nullam cursus dolor non lacus. Aenean
-						vitae orci. Mauris vulputate ornare urna.</p>
-				</div>
-				<div id="otpInfo" class="infoBox">
-					<h4><a href="#mainInfo" class="hideInfo" id="otpInfoHide">Hide this Information</a> <a href="#l2header" class="toTop">Back
-							to Top</a></h4>
-					<h3>Get a Token</h3>
-					<p>Replace this with text about using one time passcodes. Lorem ipsum dolor sit amet,
-						consectetuer adipiscing elit. Nullam cursus dolor non lacus. Aenean vitae orci.
-						Mauris vulputate ornare urna.</p>
-				</div>
-				<div id="kx509Info" class="infoBox">
-					<h4><a href="#mainInfo" class="hideInfo" id="kx509InfoHide">Hide this Information</a> <a href="#l2header" class="toTop">Back
-							to Top</a></h4>
-					<h3>Download KX.509</h3>
-					<p>The KX.509 service provides a client/server application that uses Kerberos to
-						acquire a short-term X.509 certificate. This makes it possible for web-browsers
-						to authenticate a user to any CoSign-protected web services silently instead of
-						prompting the user for a name and password. At U-M, this service can be used by
-						those who know their Uniqname and Kerberos password.</p>
-				</div>
+				<h1 id="instruct">$t</h1>
+				$!include(inc/help_infobox.inc)
 			</div>
 			<form action="/cgi-bin/login" method="post" name="factors" id="rightUIcol">
-			<input type="hidden" name="required" value="$f" />
-			<input type="hidden" name="ref" value="$r" />
-			<input type="hidden" name="service" value="$c" />
-			<input type="hidden" name="reauth" value="true" />
-			<div id="error">$e</div>
-				<div class="factorHead"> <a href="#" tabindex="10">Help</a>
-					<h2 id="kerbTitle"><span>&nbsp;</span>ID &amp; Password</h2>
-					<div class="authComplete" style="display: none;">Authentication Complete</div>
-				</div>
-				<div class="factor" id="kerberos">
-					<table>
-						<tr>
-							<td><label for="login">Login</label></td>
-							<td
-							id="login">$l (<a href="/cgi-bin/logout" class="switchUser" id="switchUserR" tabindex="1">Switch
-									Users</a>)</td>
-						</tr>
-						<tr>
-							<td><label for="password">Password</label></td>
-							<td><input id="password" name="password" type="password" value="" size="18" tabindex="2" /></td>
-						</tr>
-						<tr class="capsLock" style="display: none;">
-							<td>&nbsp;</td>
-							<td>Caps Lock is on</td>
-						</tr>
-					</table>
-					Need <a href="#kerbInfo" id="kerbInfoShow" tabindex="7">an account or password help?</a> </div>
-				<div class="factorHead"> <a href="#" tabindex="11">Help</a>
-					<h2 id="otpTitle"><span>&nbsp;</span>One Time Passcode</h2>
-					<div class="authComplete" style="display: none;">Authentication Complete</div>
-				</div>
-				<div class="factor" id="otp">
-					<table>
-						<tr>
-							<td><label for="passcode" id="pCodeLabel">Passcode</label></td>
-							<td><input id="passcode" name="passcode" type="password" value="" size="18" tabindex="3" /></td>
-						</tr>
-						<tr class="capsLock" style="display: none;">
-							<td>&nbsp;</td>
-							<td>Caps Lock is on</td>
-						</tr>
-					</table>
-					Manage your <a href="#otpInfo" id="otpInfoShow" tabindex="8">token</a> </div>
-				<div class="factorHead"> <a href="#" tabindex="12">Help</a>
-					<h2 id="kx509Title"><span>&nbsp;</span>Certificate</h2>
-					<div class="authComplete" style="display: none;">Authentication Complete</div>
-				</div>
-				<div class="factor" id="kx509">
-					<p class="note">You must have k.x-509 software installed and configured.</p>
-					<p>
-						<input name="useKX509" id="useKX509" type="checkbox" value="1" tabindex="5" />
-						<label for="useKX509">Authenticate using a certificate</label>
-					</p>
-					Download <a href="#kx509Info" id="kx509InfoShow" tabindex="9">k.x-509 software</a> </div>
+				<input type="hidden" name="required"
+				value="$f" />
+				<input type="hidden" name="ref"
+				value="$r" />
+				<input type="hidden" name="service"
+				value="$c" />
+				<input type="hidden" name="reauth" value="true" />
+				<div id="error" style="display: none;">$e</div>
+				$!include(inc/factor_login_reauth.inc)
+				$!include(inc/factor_otp.inc)
+				$!include(inc/factor_kx509.inc)
+				$!include(inc/factor_invite.inc)
 				<div id="loginButton">
-					<input type="submit" name="doLogin" value="Log In" tabindex="6" />
+					<input type="submit" name="doLogin" value="$!_("Log In")" tabindex="6" />
 				</div>
 			</form>
 			<div class="clear">&nbsp;</div>
@@ -162,8 +60,7 @@
 		<div id="uiBottom">&nbsp;</div>
 	</div>
 </div>
-<div id="foot">&copy; 2006 <a href="http://www.umich.edu/~regents/" title="Regents of the University of Michigan"> Regents
-		of the University of Michigan</a> </div>
+$!include(inc/%lang%/footer.inc)
 <form name="switch" id="switchUserForm" action="/cgi-bin/logout" enctype="application/x-www-form-urlencoded" method="post">
 	<input type="hidden" name="url" value="$r" />
 	<input type="hidden" name="service" value="$c" />
diff --git a/html/services.html b/html/services.html
index 4d1d7cd..4ccb1cc 100644
--- a/html/services.html
+++ b/html/services.html
@@ -24,14 +24,14 @@ $!include(inc/css.inc)
             <li>$N</li>
             <li>$I ($N)</li>
             <li>$M</li>
-            <li><a id="members" href="https://weblogin.foo.bar/members/">$!_("Manage your profile or change password")</a></li>
-            <li><a id="logout" href="https://weblogin.foo.bar/logout/">$!_("Logout")</a></li>
+            <li><a id="members" href="https://members.foo.bar/members/">$!_("Manage your profile or change password")</a></li>
+            <li><a id="logout" href="https://weblogin.foo.bar/cgi-bin/logout/">$!_("Logout")</a></li>
           </ul>
         </td>
         <td valign="top" width="55%">
           <b>$!_("Services")</b>
           <hr color="#dddddd" noshade="noshade" size="1">
-          <div style="font-size: 83%;">
+          <div class="servicelist">
             <br><br>
 				    $!include(inc/%lang%/*.html)
           </div>
diff --git a/html/services/index.php b/html/services/index.php
index e189185..385553e 100644
--- a/html/services/index.php
+++ b/html/services/index.php
@@ -221,7 +221,7 @@ function gaia_setFocus() {
         <td valign="top" width="55%">
           <b>Web 服务</b>
           <hr color="#dddddd" noshade="noshade" size="1">
-          <div style="font-size: 83%;">
+          <div class="servicelist">
             <br><br>
 <?php
 $has_services = false;
diff --git a/html/validation_error.html b/html/validation_error.html
deleted file mode 100755
index a667522..0000000
--- a/html/validation_error.html
+++ /dev/null
@@ -1,54 +0,0 @@
-<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
-<meta http-equiv="Pragma" content="no-cache" />
-<meta http-equiv="Expires" content="Monday, 16-Apr-73 13:10:00 GMT" />
-<title>$t</title>
-<style type="text/css" media="screen">
-/* <![CDATA[ */@import "/cosign/cosign_base.css"/**/;/* ]]> */
-
-#rightUIcol .factorHead h2 {
-	background: none;
-	color: #999;
-}
-</style>
-</head>
-<body>
-<div id="page">
-	<div id="head"> <a id="mast" href="#" title="Link to Homepage"><span>
-		<!--A small logo for when CSS is disabled goes here. <img src="#" alt="" width="16" height="16" />//-->
-		</span> <strong>Our Home Page</strong></a> </div>
-	<div id="main">
-		<div id="uiRow">
-			<div id="leftUIcol">
-				<h1 class="error">$t</h1>
-				<p>
-				$m
-				<p>Please contact <a href="#">Technical Support (put URL here)</a> if you have any questions.</p>
-				<p><a href="#">Put URL to main CoSign page here</a></p>
-				<p class="techInfo"><strong>Technical Info:</strong> $e</p>
-			</div>
-			<form action="#" method="post" name="factors" id="rightUIcol">
-				<div class="factorHead">
-					<h2>ID &amp; Password</h2>
-				</div>
-				<div class="factorHead">
-					<h2>One Time Passcode</h2>
-				</div>
-				<div class="factorHead">
-					<h2>Certificate</h2>
-				</div>
-				<div id="loginButton">
-					<input type="submit" name="doLogin" value="Log In" disabled="disabled" />
-				</div>
-			</form>
-			<div class="clear">&nbsp;</div>
-		</div>
-		<div id="uiBottom">&nbsp;</div>
-	</div>
-</div>
-<div id="foot">&copy; 2006 <a href="http://www.umich.edu/~regents/" title="Regents of the University of Michigan"> Regents
-		of the University of Michigan</a> </div>
-</body>
-</html>
diff --git a/html/verify-logout.html b/html/verify-logout.html
index ea68776..c3a1739 100755
--- a/html/verify-logout.html
+++ b/html/verify-logout.html
@@ -1,16 +1,21 @@
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
-<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
+<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <meta http-equiv="Pragma" content="no-cache" />
 <meta http-equiv="Expires" content="Monday, 16-Apr-73 13:10:00 GMT" />
 <title>$t</title>
 <style type="text/css" media="screen">
-/* <![CDATA[ */@import "/cosign/cosign_base.css"/**/;/* ]]> */
+$!include(inc/css.inc)
 </style>
 <script type="text/javascript" src="/cosign/js/prototype.js"></script>
 <script type="text/javascript">
 	window.onload = function() {
+		try {
+			if (history.length <= 1) {
+				$('back').hide();
+			}
+		} catch (e) {}
 		Event.observe('back', 'click', function() {history.go(-1)});
 		$('logout').focus();
 	}
@@ -18,28 +23,25 @@
 </head>
 <body>
 <div id="page">
-	<div id="head"> <a id="mast" href="#" title="Link to Homepage"><span>
-		<!--A small logo for when CSS is disabled goes here. <img src="#" alt="" width="16" height="16" />//-->
-		</span> <strong>Our Home Page</strong></a> </div>
+  $!include(inc/%lang%/header.inc)
 	<div id="main" class="logoutUI">
 		<div id="uiRow">
 		    <form name="f" method="post" action="/cgi-bin/logout">
-			<h1>Log Out</h1>
-			<p>You are about to log out of <a href="/services/">all weblogin applications</a>.
-				Are you sure you want to do this?</p>
+			<h1>$!_("Log Out")</h1>
+			<p>$!_("You are about to log out of <a href=\"/services/\">all weblogin applications</a>.")
+				$!_("Are you sure you want to do this?")</p>
 			<p>
-				<input type="button" id="back" value="Go Back" />
-				<input type="submit" id="logout" name="verify" value="Log Out" />
+				<input type="button" id="back" value="$!_("Go Back")" />
+				<input type="submit" id="logout" name="verify" value="$!_("Log Out")" />
 			</p>
-			<div class="redirect">After logout your browser
-			will redirect to: $u</div>
+			<div class="redirect">$!_("After logout your browser will redirect to:")
+			$u</div>
 			<input type="hidden" name="url" value="$u" />
 		</form>
 		</div>
 		<div id="uiBottom">&nbsp;</div>
 	</div>
 </div>
-<div id="foot">&copy; 2006 <a href="http://www.umich.edu/~regents/" title="Regents of the University of Michigan"> Regents
-		of the University of Michigan</a> </div>
+$!include(inc/%lang%/footer.inc)
 </body>
 </html>
-- 
tg: (eb6f36c..) t/templates_standard (depends on: t/services_template t/javascript)
